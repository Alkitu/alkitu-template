# Component Organism Template

Complete template for creating Organism components following Atomic Design methodology.

---

## File Structure

```
organisms/[feature-name]/
├── [FeatureName]Organism.tsx          # Component implementation
├── [FeatureName]Organism.types.ts     # TypeScript types
├── [FeatureName]Organism.test.tsx     # Unit tests (generated by frontend-testing-expert)
├── [FeatureName]Organism.stories.tsx  # Storybook stories (generated by frontend-testing-expert)
└── index.ts                           # Barrel export
```

---

## Template: FeatureNameOrganism.tsx

````typescript
'use client';

import React, { useState } from 'react';
import { cn } from '@/lib/utils';
import { Button, Input } from '@/components/atoms';
import { FormField, SearchBar } from '@/components/molecules';
import type { FeatureNameOrganismProps } from './FeatureNameOrganism.types';

/**
 * FeatureNameOrganism - Atomic Design Organism
 *
 * [Description of the organism's purpose and what feature it represents]
 *
 * This organism receives **translated text as props** from page components.
 * It does NOT use `useTranslations()` hook directly.
 *
 * @example
 * ```tsx
 * // In page.tsx
 * const t = useTranslations();
 * const props = {
 *   title: t('feature.title'),
 *   subtitle: t('feature.subtitle'),
 *   onSubmit: handleSubmit,
 * };
 *
 * <FeatureNameOrganism {...props} />
 * ```
 */
export const FeatureNameOrganism = React.forwardRef<
  HTMLDivElement,
  FeatureNameOrganismProps
>(
  (
    {
      // Configuration props (translated in page)
      title,
      subtitle,
      buttonText,
      placeholderText,

      // Behavior props
      onSubmit,
      onCancel,

      // State props
      loading = false,
      error,
      success,

      // Styling props
      variant = 'default',
      className = '',
      ...props
    },
    ref,
  ) => {
    // Internal state management
    const [formData, setFormData] = useState({
      email: '',
      name: '',
    });

    const [isSubmitting, setIsSubmitting] = useState(false);

    // Handle form input changes
    const handleChange = (field: string) => (
      e: React.ChangeEvent<HTMLInputElement>,
    ) => {
      setFormData((prev) => ({
        ...prev,
        [field]: e.target.value,
      }));
    };

    // Handle form submission
    const handleSubmit = async (e: React.FormEvent) => {
      e.preventDefault();
      setIsSubmitting(true);

      try {
        await onSubmit?.(formData);
      } catch (error) {
        console.error('Submission error:', error);
      } finally {
        setIsSubmitting(false);
      }
    };

    // Variant classes
    const variantClasses = {
      default: 'bg-background',
      primary: 'bg-primary/5',
      secondary: 'bg-secondary/5',
    }[variant];

    // Container classes
    const containerClasses = cn(
      'flex flex-col gap-6 p-6 rounded-lg',
      variantClasses,
      className,
    );

    return (
      <div ref={ref} className={containerClasses} {...props}>
        {/* Header section with molecules/atoms */}
        <div className="space-y-2">
          {title && (
            <h2 className="text-2xl font-bold">{title}</h2>
          )}
          {subtitle && (
            <p className="text-muted-foreground">{subtitle}</p>
          )}
        </div>

        {/* Form section with molecules */}
        <form onSubmit={handleSubmit} className="space-y-4">
          <FormField
            label="Name"
            type="text"
            placeholder={placeholderText?.name}
            value={formData.name}
            onChange={handleChange('name')}
            required
          />

          <FormField
            label="Email"
            type="email"
            placeholder={placeholderText?.email}
            value={formData.email}
            onChange={handleChange('email')}
            error={error}
            required
          />

          {/* Success message */}
          {success && (
            <div className="p-4 bg-success/10 text-success rounded-md">
              {success}
            </div>
          )}

          {/* Actions */}
          <div className="flex gap-2 justify-end">
            {onCancel && (
              <Button
                type="button"
                variant="outline"
                onClick={onCancel}
                disabled={isSubmitting || loading}
              >
                Cancel
              </Button>
            )}

            <Button
              type="submit"
              variant="primary"
              loading={isSubmitting || loading}
              disabled={isSubmitting || loading}
            >
              {buttonText || 'Submit'}
            </Button>
          </div>
        </form>
      </div>
    );
  },
);

FeatureNameOrganism.displayName = 'FeatureNameOrganism';

export default FeatureNameOrganism;
````

---

## Template: FeatureNameOrganism.types.ts

```typescript
import type { HTMLAttributes } from "react";

/**
 * Variant options for FeatureNameOrganism
 */
export type OrganismVariant = "default" | "primary" | "secondary";

/**
 * Form data structure
 */
export interface FormData {
  email: string;
  name: string;
}

/**
 * Placeholder text structure
 */
export interface PlaceholderText {
  name?: string;
  email?: string;
}

/**
 * Props for FeatureNameOrganism
 *
 * IMPORTANT: All text props should be **translated strings** passed from page components.
 * This organism does NOT handle translations internally.
 */
export interface FeatureNameOrganismProps
  extends HTMLAttributes<HTMLDivElement> {
  /**
   * Title text (pre-translated)
   */
  title?: string;

  /**
   * Subtitle text (pre-translated)
   */
  subtitle?: string;

  /**
   * Submit button text (pre-translated)
   */
  buttonText?: string;

  /**
   * Placeholder text for inputs (pre-translated)
   */
  placeholderText?: PlaceholderText;

  /**
   * Form submission handler
   */
  onSubmit?: (data: FormData) => void | Promise<void>;

  /**
   * Cancel handler
   */
  onCancel?: () => void;

  /**
   * Loading state
   * @default false
   */
  loading?: boolean;

  /**
   * Error message to display (pre-translated)
   */
  error?: string;

  /**
   * Success message to display (pre-translated)
   */
  success?: string;

  /**
   * Visual variant
   * @default 'default'
   */
  variant?: OrganismVariant;

  /**
   * Custom className for container
   */
  className?: string;
}
```

---

## Template: index.ts

```typescript
export { FeatureNameOrganism, default } from "./FeatureNameOrganism";
export type {
  FeatureNameOrganismProps,
  OrganismVariant,
  FormData,
  PlaceholderText,
} from "./FeatureNameOrganism.types";
```

---

## Organism Component Checklist

Before creating an organism, ensure:

### ✅ Definition Validation

- [ ] Component is composed of **atoms and molecules**
- [ ] Component represents a **distinct section of interface**
- [ ] Component MAY contain **business logic**
- [ ] Component is **context-specific** (not as reusable as atoms/molecules)

### ✅ Composition

- [ ] Uses atoms from `@/components/atoms`
- [ ] Uses molecules from `@/components/molecules`
- [ ] MAY compose other organisms (sparingly)
- [ ] Clear hierarchy and layout

### ✅ Translation Handling (CRITICAL)

- [ ] Does **NOT** use `useTranslations()` hook directly
- [ ] Receives **translated text as props** from page
- [ ] All text props are strings (not translation keys)
- [ ] Page component handles translation, organism receives final text

### ✅ Props Design

- [ ] Configuration props (title, subtitle, buttonText)
- [ ] Behavior props (onSubmit, onCancel, onChange)
- [ ] State props (loading, error, success)
- [ ] Data props (items, data, initialValues)
- [ ] Clear prop names with JSDoc

### ✅ State Management

- [ ] Local state for UI concerns (isOpen, selectedTab)
- [ ] Form state (formData, validation)
- [ ] MAY use hooks (useState, useReducer)
- [ ] MAY use context (sparingly)
- [ ] MAY fetch data (if organism manages it)

### ✅ Business Logic

- [ ] MAY contain validation logic
- [ ] MAY handle form submission
- [ ] MAY manage API calls
- [ ] MAY use custom hooks
- [ ] Keep logic focused on organism's purpose

### ✅ Styling

- [ ] Uses `cn()` for class composition
- [ ] Layout classes for child arrangement
- [ ] Responsive design implemented
- [ ] Consistent spacing system

### ✅ Accessibility

- [ ] Semantic HTML structure
- [ ] Form elements properly labeled
- [ ] Error messages announced
- [ ] Keyboard navigation works
- [ ] Focus management correct

### ✅ TypeScript

- [ ] Types in separate `.types.ts` file
- [ ] Interface types for data structures
- [ ] Handler function types
- [ ] All props documented
- [ ] Exports types from `index.ts`

### ✅ File Structure

- [ ] `FeatureNameOrganism.tsx` created (note "Organism" suffix)
- [ ] `FeatureNameOrganism.types.ts` created
- [ ] `index.ts` barrel export created
- [ ] Component has `displayName` set

---

## Common Organisms Examples

### 1. LoginFormOrganism

- **Atoms/Molecules**: FormField, Button
- **Purpose**: User authentication form
- **Props**: onSubmit, error, loading, buttonText (translated)
- **State**: formData, isSubmitting

### 2. HeroOrganism

- **Atoms/Molecules**: Badge, Typography, Button
- **Purpose**: Hero section with CTA
- **Props**: title, subtitle, badge, cta (all translated)
- **State**: None (stateless)

### 3. DataTableOrganism

- **Atoms/Molecules**: Input, Button, Table
- **Purpose**: Data display with search and pagination
- **Props**: data, columns, onSearch, onPageChange
- **State**: currentPage, searchQuery, selectedRows

### 4. ThemeSelectorOrganism

- **Atoms/Molecules**: Select, ColorPicker, Button
- **Purpose**: Theme customization interface
- **Props**: themes, onSelect, onSave
- **State**: selectedTheme, previewMode

### 5. CheckoutFormOrganism

- **Atoms/Molecules**: FormField, Button, CardPreview
- **Purpose**: Payment form with validation
- **Props**: onSubmit, items, total
- **State**: paymentData, validation, isProcessing

---

## Anti-Patterns

### ❌ DON'T: Use useTranslations() Hook

```typescript
// FeatureNameOrganism.tsx - BAD
const FeatureNameOrganism = () => {
  const t = useTranslations(); // ❌ Translation in organism

  return (
    <div>
      <h1>{t('organism.title')}</h1> {/* ❌ Direct translation call */}
    </div>
  );
};
```

**✅ SHOULD BE:**

```typescript
// page.tsx - GOOD
const t = useTranslations();
const props = { title: t('organism.title') };

<FeatureNameOrganism {...props} />

// FeatureNameOrganism.tsx - GOOD
const FeatureNameOrganism = ({ title }: Props) => {
  return <div><h1>{title}</h1></div>; // ✅ Uses pre-translated text
};
```

### ❌ DON'T: Create Inline Components

```typescript
// FeatureNameOrganism.tsx - BAD
const FeatureNameOrganism = () => (
  <div>
    <button>Custom Button</button> {/* ❌ Should use Button atom */}
    <div className="...">Custom Card</div> {/* ❌ Should create Card atom/molecule */}
  </div>
);
```

### ❌ DON'T: Pass Too Many Props

```typescript
// FeatureNameOrganism.tsx - BAD
interface Props {
  title: string;
  subtitle: string;
  button1Text: string;
  button2Text: string;
  button3Text: string;
  // ... 20 more props ❌
}
```

**✅ SHOULD BE:**

```typescript
// FeatureNameOrganism.tsx - GOOD
interface Props {
  title: string;
  subtitle: string;
  actions: ActionButton[]; // ✅ Group related props
}
```

### ❌ DON'T: Mix Concerns

```typescript
// FeatureNameOrganism.tsx - BAD
const FeatureNameOrganism = () => {
  // ❌ Authentication logic
  useEffect(() => {
    checkAuth();
  }, []);

  // ❌ Analytics tracking
  useEffect(() => {
    trackPageView();
  }, []);

  // ❌ Global state management
  const dispatch = useDispatch();

  return <div />; // ❌ Too many concerns
};
```

---

## Translation Pattern (CRITICAL)

### ✅ CORRECT: Page Handles Translation

```typescript
// app/[lang]/feature/page.tsx
'use client';

import { useTranslations } from '@/context/TranslationContext';
import { FeatureNameOrganism } from '@/components/organisms';

export default function FeaturePage() {
  const t = useTranslations();

  // Prepare props with translations
  const organismProps = {
    title: t('feature.title'),
    subtitle: t('feature.subtitle'),
    buttonText: t('feature.submit'),
    placeholderText: {
      name: t('feature.placeholder.name'),
      email: t('feature.placeholder.email'),
    },
    error: error ? t('feature.error.generic') : undefined,
    success: success ? t('feature.success.message') : undefined,
    onSubmit: handleSubmit,
  };

  return <FeatureNameOrganism {...organismProps} />;
}
```

```typescript
// organisms/feature-name/FeatureNameOrganism.tsx
export const FeatureNameOrganism = ({
  title,
  subtitle,
  buttonText,
  // ... receive translated strings
}: FeatureNameOrganismProps) => {
  return (
    <div>
      <h1>{title}</h1> {/* Already translated */}
      <p>{subtitle}</p> {/* Already translated */}
      <Button>{buttonText}</Button> {/* Already translated */}
    </div>
  );
};
```

---

## After Creating Component

Once you've created the organism:

1. **Run frontend-testing-expert agent** to generate tests
2. **Run frontend-testing-expert agent** to generate Storybook stories
3. **Add to barrel export** in `organisms/index.ts`
4. **Create corresponding page** (if needed)
5. **Verify component** in Storybook (`npm run storybook`)
6. **Run tests** (`npm run test FeatureNameOrganism.test.tsx`)
7. **Verify coverage** (`npm run test:coverage` - target 95%+)
8. **Consider E2E tests** (if critical flow)

---

## Related Documentation

- [Atomic Design Architecture](/docs/00-conventions/atomic-design-architecture.md)
- [Component Structure and Testing](/docs/00-conventions/component-structure-and-testing.md)
- [Component Atom Template](/docs/02-components/component-atom-template.md)
- [Component Molecule Template](/docs/02-components/component-molecule-template.md)
- [Testing E2E Criteria](/docs/05-testing/testing-e2e-criteria-when-to-create.md)

---

**Last Updated**: 2025-01-09
