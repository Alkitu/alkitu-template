{"files":{"src/users/services/user-facade.service.ts":{"language":"typescript","mutants":[{"id":"2","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":17,"line":61},"start":{"column":9,"line":61}}},{"id":"3","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":17,"line":61},"start":{"column":9,"line":61}}},{"id":"7","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":66,"line":70},"start":{"column":18,"line":70}}},{"id":"8","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":63,"line":70},"start":{"column":40,"line":70}}},{"id":"9","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":63,"line":70},"start":{"column":40,"line":70}}},{"id":"11","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":21,"line":71},"start":{"column":15,"line":71}}},{"id":"12","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":27,"line":72},"start":{"column":15,"line":72}}},{"id":"14","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":65,"line":76},"start":{"column":50,"line":76}}},{"id":"15","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":58,"line":78},"start":{"column":9,"line":78}}},{"id":"21","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":33,"line":116},"start":{"column":9,"line":116}}},{"id":"22","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":33,"line":116},"start":{"column":9,"line":116}}},{"id":"29","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":14,"line":141},"start":{"column":9,"line":141}}},{"id":"30","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":14,"line":141},"start":{"column":9,"line":141}}},{"id":"32","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":39,"line":142},"start":{"column":23,"line":142}}},{"id":"35","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":50,"line":158},"start":{"column":23,"line":158}}},{"id":"37","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":26,"line":166},"start":{"column":9,"line":166}}},{"id":"38","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":26,"line":166},"start":{"column":9,"line":166}}},{"id":"43","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":54,"line":186},"start":{"column":23,"line":186}}},{"id":"49","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":29,"line":217},"start":{"column":13,"line":217}}},{"id":"50","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":28,"line":218},"start":{"column":17,"line":218}}},{"id":"51","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":47,"line":219},"start":{"column":14,"line":219}}},{"id":"52","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":17,"line":227},"start":{"column":9,"line":227}}},{"id":"53","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":17,"line":227},"start":{"column":9,"line":227}}},{"id":"59","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":28,"line":235},"start":{"column":24,"line":235}}},{"id":"60","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":36,"line":235},"start":{"column":30,"line":235}}},{"id":"61","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":49,"line":235},"start":{"column":38,"line":235}}},{"id":"65","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":21,"line":246},"start":{"column":15,"line":246}}},{"id":"68","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":67,"line":248},"start":{"column":40,"line":248}}},{"id":"70","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":65,"line":251},"start":{"column":50,"line":251}}},{"id":"73","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":59,"line":254},"start":{"column":18,"line":254}}},{"id":"78","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":33,"line":270},"start":{"column":22,"line":270}}},{"id":"79","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":53,"line":270},"start":{"column":35,"line":270}}},{"id":"85","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":57,"line":286},"start":{"column":23,"line":286}}},{"id":"86","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":65,"line":291},"start":{"column":52,"line":291}}},{"id":"90","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":85,"line":298},"start":{"column":16,"line":298}}},{"id":"97","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":66,"line":312},"start":{"column":23,"line":312}}},{"id":"98","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":25,"line":318},"start":{"column":7,"line":318}}},{"id":"102","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":94,"line":329},"start":{"column":16,"line":329}}},{"id":"109","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":68,"line":343},"start":{"column":23,"line":343}}},{"id":"110","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":27,"line":349},"start":{"column":7,"line":349}}},{"id":"114","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":96,"line":360},"start":{"column":16,"line":360}}},{"id":"120","mutatorName":"ConditionalExpression","replacement":"true","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":18,"line":380},"start":{"column":9,"line":380}}},{"id":"121","mutatorName":"ConditionalExpression","replacement":"false","statusReason":"Ignored because of excluded mutation \"ConditionalExpression\"","status":"Ignored","static":false,"location":{"end":{"column":18,"line":380},"start":{"column":9,"line":380}}},{"id":"125","mutatorName":"StringLiteral","replacement":"``","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":95,"line":384},"start":{"column":20,"line":384}}},{"id":"126","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":26,"line":385},"start":{"column":17,"line":385}}},{"id":"129","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":61,"line":389},"start":{"column":23,"line":389}}},{"id":"132","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":38,"line":396},"start":{"column":11,"line":396}}},{"id":"133","mutatorName":"StringLiteral","replacement":"\"\"","statusReason":"Ignored because of excluded mutation \"StringLiteral\"","status":"Ignored","static":false,"location":{"end":{"column":37,"line":397},"start":{"column":11,"line":397}}},{"id":"1","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n- Object {\n-   \"contactNumber\": \"+1234567890\",\n-   \"email\": \"test@example.com\",\n-   \"lastName\": \"User\",\n-   \"name\": \"Test\",\n-   \"password\": \"hashedPassword123\",\n-   \"terms\": true,\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:185:37)","status":"Killed","testsCompleted":53,"killedBy":["43"],"location":{"end":{"column":6,"line":57},"start":{"column":51,"line":54}}},{"id":"0","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"contactNumber\": null, \"createdAt\": 2025-07-12T00:36:39.684Z, \"email\": \"test@example.com\", \"id\": \"user-id\", \"lastLogin\": null, \"lastName\": \"User\", \"name\": \"Test\", \"role\": \"USER\"}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:423:22)","status":"Killed","testsCompleted":53,"killedBy":["13"],"location":{"end":{"column":4,"line":84},"start":{"column":46,"line":47}}},{"id":"5","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:424:54)","status":"Killed","testsCompleted":53,"killedBy":["13"],"location":{"end":{"column":6,"line":74},"start":{"column":9,"line":67}}},{"id":"4","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:40.782Z, \"email\": \"test@example.com\", \"emailVerified\": null, \"id\": \"1\", \"lastLogin\": null, \"lastName\": \"User\", \"name\": \"Test\", \"password\": \"hashedPassword123\", \"role\": \"user\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:189:45)","status":"Killed","testsCompleted":53,"killedBy":["43"],"location":{"end":{"column":6,"line":64},"start":{"column":19,"line":61}}},{"id":"6","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n- Object {\n-   \"link\": \"/dashboard\",\n-   \"message\": \"Welcome to Alkitu, Test!\",\n-   \"type\": \"info\",\n-   \"userId\": \"1\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts:178:54)","status":"Killed","testsCompleted":53,"killedBy":["22"],"location":{"end":{"column":8,"line":73},"start":{"column":57,"line":68}}},{"id":"10","mutatorName":"LogicalOperator","replacement":"user.name && user.email","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  Object {\n    \"link\": \"/dashboard\",\n-   \"message\": \"Welcome to Alkitu, Test!\",\n+   \"message\": \"Welcome to Alkitu, test@example.com!\",\n    \"type\": \"info\",\n    \"userId\": \"1\",\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts:178:54)","status":"Killed","testsCompleted":53,"killedBy":["22"],"location":{"end":{"column":63,"line":70},"start":{"column":40,"line":70}}},{"id":"13","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"Warning: Could not create welcome notification:\", \"Notification service error\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:131:26)","status":"Killed","testsCompleted":53,"killedBy":["33"],"location":{"end":{"column":6,"line":81},"start":{"column":21,"line":74}}},{"id":"16","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: [{\"contactNumber\": \"+1111111111\", \"createdAt\": 2025-07-12T00:36:42.379Z, \"email\": \"user1@example.com\", \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:42.379Z, \"lastName\": \"One\", \"name\": \"User\", \"role\": \"user\"}, {\"contactNumber\": \"+2222222222\", \"createdAt\": 2025-07-12T00:36:42.379Z, \"email\": \"user2@example.com\", \"id\": \"2\", \"lastLogin\": 2025-07-12T00:36:42.379Z, \"lastName\": \"Two\", \"name\": \"User\", \"role\": \"user\"}]\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:451:22)","status":"Killed","testsCompleted":53,"killedBy":["52"],"location":{"end":{"column":4,"line":89},"start":{"column":19,"line":87}}},{"id":"17","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"pagination\": {\"hasNext\": false, \"hasPrev\": false, \"limit\": 10, \"page\": 1, \"total\": 1, \"totalPages\": 1}, \"users\": [{\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:42.867Z, \"email\": \"user1@example.com\", \"id\": \"1\", \"lastLogin\": null, \"lastName\": \"Test\", \"name\": \"User1\", \"role\": \"USER\"}]}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts:352:22)","status":"Killed","testsCompleted":53,"killedBy":["26"],"location":{"end":{"column":4,"line":94},"start":{"column":55,"line":92}}},{"id":"18","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:43.067Z, \"email\": \"test@example.com\", \"emailVerified\": 2025-07-12T00:36:43.067Z, \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:43.067Z, \"lastName\": \"User\", \"name\": \"Test\", \"role\": \"user\"}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:236:22)","status":"Killed","testsCompleted":53,"killedBy":["45"],"location":{"end":{"column":4,"line":99},"start":{"column":29,"line":97}}},{"id":"19","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"test@example.com\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:106:42)","status":"Killed","testsCompleted":53,"killedBy":["0"],"location":{"end":{"column":4,"line":104},"start":{"column":36,"line":102}}},{"id":"20","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:43.907Z, \"email\": \"test@example.com\", \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:43.907Z, \"lastName\": \"Updated LastName\", \"name\": \"Updated Name\", \"role\": \"user\"}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:348:22)","status":"Killed","testsCompleted":53,"killedBy":["49"],"location":{"end":{"column":4,"line":128},"start":{"column":58,"line":107}}},{"id":"23","mutatorName":"LogicalOperator","replacement":"fullUser || previousUser","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 2\nReceived: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts:270:36)","status":"Killed","testsCompleted":53,"killedBy":["24"],"location":{"end":{"column":33,"line":116},"start":{"column":9,"line":116}}},{"id":"24","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:45.187Z, \"email\": \"test@example.com\", \"emailVerified\": 2025-07-12T00:36:45.187Z, \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:45.187Z, \"lastName\": \"Updated LastName\", \"name\": \"Updated Name\", \"password\": \"hashedPassword\", \"role\": \"user\"}, {\"contactNumber\": \"+1234567890\", \"email\": \"test@example.com\", \"id\": \"1\", \"lastName\": \"User\", \"name\": \"Test\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:350:45)","status":"Killed","testsCompleted":53,"killedBy":["49"],"location":{"end":{"column":6,"line":125},"start":{"column":35,"line":116}}},{"id":"25","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:45.342Z, \"email\": \"test@example.com\", \"emailVerified\": 2025-07-12T00:36:45.342Z, \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:45.342Z, \"lastName\": \"Updated LastName\", \"name\": \"Updated Name\", \"password\": \"hashedPassword\", \"role\": \"user\"},\n- Object {\n-   \"contactNumber\": \"+1234567890\",\n-   \"email\": \"test@example.com\",\n-   \"id\": \"1\",\n-   \"lastName\": \"User\",\n-   \"name\": \"Test\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:350:45)","status":"Killed","testsCompleted":53,"killedBy":["49"],"location":{"end":{"column":8,"line":124},"start":{"column":58,"line":118}}},{"id":"26","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user-id\", {\"tagIds\": [\"tag1\", \"tag2\"]}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:134:41)","status":"Killed","testsCompleted":53,"killedBy":["1"],"location":{"end":{"column":4,"line":133},"start":{"column":70,"line":131}}},{"id":"27","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"message\": \"User deleted successfully\"}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:383:22)","status":"Killed","testsCompleted":53,"killedBy":["50"],"location":{"end":{"column":4,"line":159},"start":{"column":28,"line":136}}},{"id":"31","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).rejects.toThrow(expected)\n\nExpected substring: \"User not found\"\nReceived message:   \"Cannot read properties of null (reading 'id')\"\n\n      243 |       // Publish user deleted event\n      244 |       await this.userEvents.publishUserDeleted(id, stryMutAct_9fa48(\"33\") ? {} : (stryCov_9fa48(\"33\"), {\n    > 245 |         id: user.id,\n          |                  ^\n      246 |         email: user.email,\n      247 |         name: user.name,\n      248 |         lastName: user.lastName,\n\n      at UserFacadeService.remove (src/users/services/user-facade.service.ts:245:18)\n      at Object.<anonymous> (src/users/services/__tests__/user-facade.service.100-percent.spec.ts:148:7)\n    at Object.toThrow (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/node_modules/expect/build/index.js:218:22)\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:148:52)\n    at Promise.then.completed (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/utils.js:298:28)\n    at new Promise (<anonymous>)\n    at callAsyncCircusFn (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/utils.js:231:10)\n    at _callCircusTest (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:316:40)\n    at _runTest (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:252:3)\n    at _runTestsForDescribeBlock (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:126:9)\n    at _runTestsForDescribeBlock (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:121:9)\n    at _runTestsForDescribeBlock (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:121:9)\n    at run (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/run.js:71:3)\n    at runAndTransformResultsToJestFormat (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapterInit.js:122:21)\n    at jestAdapter (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-circus/build/legacy-code-todo-rewrite/jestAdapter.js:79:19)\n    at runTestInternal (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-runner/build/runTest.js:367:16)\n    at runTest (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/node_modules/jest-runner/build/runTest.js:444:34)","status":"Killed","testsCompleted":53,"killedBy":["34"],"location":{"end":{"column":6,"line":143},"start":{"column":16,"line":141}}},{"id":"28","mutatorName":"BooleanLiteral","replacement":"user","statusReason":"Error: User not found\n    at UserFacadeService.remove (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/user-facade.service.ts:236:17)\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:380:22)","status":"Killed","testsCompleted":53,"killedBy":["50"],"location":{"end":{"column":14,"line":141},"start":{"column":9,"line":141}}},{"id":"33","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"1\",\n- Object {\n-   \"contactNumber\": \"+1234567890\",\n-   \"email\": \"test@example.com\",\n-   \"id\": \"1\",\n-   \"lastName\": \"User\",\n-   \"name\": \"Test\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:385:45)","status":"Killed","testsCompleted":53,"killedBy":["50"],"location":{"end":{"column":6,"line":155},"start":{"column":50,"line":149}}},{"id":"34","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 1\n\n- Object {\n-   \"message\": \"User deleted successfully\",\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:383:22)","status":"Killed","testsCompleted":53,"killedBy":["50"],"location":{"end":{"column":52,"line":158},"start":{"column":12,"line":158}}},{"id":"36","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2025-07-12T00:36:48.161Z, \"email\": \"test@example.com\", \"emailVerified\": 2025-07-12T00:36:48.161Z, \"id\": \"1\", \"lastLogin\": 2025-07-12T00:36:48.161Z, \"lastName\": \"User\", \"name\": \"Test\", \"role\": \"user\"}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.mutation.spec.ts:280:22)","status":"Killed","testsCompleted":53,"killedBy":["47"],"location":{"end":{"column":4,"line":172},"start":{"column":46,"line":162}}},{"id":"39","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"507f1f77bcf86cd799439011\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:300:46)","status":"Killed","testsCompleted":53,"killedBy":["8"],"location":{"end":{"column":6,"line":169},"start":{"column":28,"line":166}}},{"id":"40","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user-id\", \"hashedPassword\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:147:45)","status":"Killed","testsCompleted":53,"killedBy":["2"],"location":{"end":{"column":4,"line":177},"start":{"column":60,"line":175}}},{"id":"41","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user-id\", {\"currentPassword\": \"old\", \"newPassword\": \"new\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:164:49)","status":"Killed","testsCompleted":53,"killedBy":["3"],"location":{"end":{"column":4,"line":187},"start":{"column":74,"line":180}}},{"id":"42","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 1\n\n- Object {\n-   \"message\": \"Password changed successfully\",\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:174:22)","status":"Killed","testsCompleted":53,"killedBy":["3"],"location":{"end":{"column":56,"line":186},"start":{"column":12,"line":186}}},{"id":"44","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user-id\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:192:50)","status":"Killed","testsCompleted":53,"killedBy":["4"],"location":{"end":{"column":4,"line":197},"start":{"column":41,"line":190}}},{"id":"45","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toHaveProperty(path)\n\nMatcher error: received value must not be null nor undefined\n\nReceived has value: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts:433:22)","status":"Killed","testsCompleted":53,"killedBy":["29"],"location":{"end":{"column":4,"line":202},"start":{"column":24,"line":200}}},{"id":"46","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"newPassword\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:209:47)","status":"Killed","testsCompleted":53,"killedBy":["5"],"location":{"end":{"column":4,"line":212},"start":{"column":66,"line":205}}},{"id":"47","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user-id\", {\"contactNumber\": undefined, \"email\": \"anonymous_user-id@example.com\", \"lastName\": \"Anonymous\", \"name\": \"Anonymous User\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:242:37)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":4,"line":238},"start":{"column":39,"line":215}}},{"id":"48","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"user-id\",\n- Object {\n-   \"contactNumber\": undefined,\n-   \"email\": \"anonymous_user-id@example.com\",\n-   \"lastName\": \"Anonymous\",\n-   \"name\": \"Anonymous User\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:242:37)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":6,"line":221},"start":{"column":28,"line":216}}},{"id":"54","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"contactNumber\": \"+1234567890\", \"createdAt\": 2024-01-01T00:00:00.000Z, \"email\": \"john.doe@example.com\", \"emailVerified\": null, \"groupIds\": [], \"id\": \"507f1f77bcf86cd799439011\", \"image\": null, \"isTwoFactorEnabled\": false, \"lastLogin\": 2024-01-01T00:00:00.000Z, \"lastName\": \"Doe\", \"name\": \"John\", \"password\": \"hashed-password\", \"resourceIds\": [], \"role\": \"USER\", \"status\": \"ACTIVE\", \"tagIds\": [], \"terms\": true, \"updatedAt\": 2024-01-01T00:00:00.000Z}, {\"id\": \"user-id\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:250:45)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":6,"line":229},"start":{"column":19,"line":227}}},{"id":"55","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  {\"contactNumber\": \"+1234567890\", \"createdAt\": 2024-01-01T00:00:00.000Z, \"email\": \"john.doe@example.com\", \"emailVerified\": null, \"groupIds\": [], \"id\": \"507f1f77bcf86cd799439011\", \"image\": null, \"isTwoFactorEnabled\": false, \"lastLogin\": 2024-01-01T00:00:00.000Z, \"lastName\": \"Doe\", \"name\": \"John\", \"password\": \"hashed-password\", \"resourceIds\": [], \"role\": \"USER\", \"status\": \"ACTIVE\", \"tagIds\": [], \"terms\": true, \"updatedAt\": 2024-01-01T00:00:00.000Z},\n- Object {\n-   \"id\": \"user-id\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:250:45)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":72,"line":228},"start":{"column":58,"line":228}}},{"id":"56","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 16\n+ Received  +  1\n\n- Object {\n-   \"anonymizedFields\": Array [\n-     \"name\",\n-     \"lastName\",\n-     \"email\",\n-     \"contactNumber\",\n-   ],\n-   \"retainedFields\": Array [\n-     \"id\",\n-     \"role\",\n-     \"createdAt\",\n-   ],\n-   \"success\": true,\n-   \"timestamp\": Any<Date>,\n-   \"userId\": \"user-id\",\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:255:22)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":6,"line":237},"start":{"column":12,"line":231}}},{"id":"58","mutatorName":"ArrayDeclaration","replacement":"[]","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 5\n+ Received  + 1\n\n@@ -3,14 +3,10 @@\n      \"name\",\n      \"lastName\",\n      \"email\",\n      \"contactNumber\",\n    ],\n-   \"retainedFields\": Array [\n-     \"id\",\n-     \"role\",\n-     \"createdAt\",\n-   ],\n+   \"retainedFields\": Array [],\n    \"success\": true,\n    \"timestamp\": Any<Date>,\n    \"userId\": \"user-id\",\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:255:22)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":50,"line":235},"start":{"column":23,"line":235}}},{"id":"57","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n@@ -8,9 +8,9 @@\n    \"retainedFields\": Array [\n      \"id\",\n      \"role\",\n      \"createdAt\",\n    ],\n-   \"success\": true,\n+   \"success\": false,\n    \"timestamp\": Any<Date>,\n    \"userId\": \"user-id\",\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:255:22)","status":"Killed","testsCompleted":53,"killedBy":["6"],"location":{"end":{"column":20,"line":232},"start":{"column":16,"line":232}}},{"id":"62","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"message\": \"Test message\", \"type\": \"info\", \"userId\": \"user-id\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:368:54)","status":"Killed","testsCompleted":53,"killedBy":["11"],"location":{"end":{"column":4,"line":257},"start":{"column":60,"line":241}}},{"id":"63","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"message\": \"Test message\", \"type\": \"info\", \"userId\": \"user-id\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:368:54)","status":"Killed","testsCompleted":53,"killedBy":["11"],"location":{"end":{"column":6,"line":249},"start":{"column":9,"line":242}}},{"id":"64","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n- Object {\n-   \"message\": \"Test message\",\n-   \"type\": \"info\",\n-   \"userId\": \"user-id\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:368:54)","status":"Killed","testsCompleted":53,"killedBy":["11"],"location":{"end":{"column":8,"line":247},"start":{"column":57,"line":243}}},{"id":"66","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n- Object {\n-   \"message\": \"Message sent successfully\",\n-   \"success\": true,\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:374:22)","status":"Killed","testsCompleted":53,"killedBy":["11"],"location":{"end":{"column":69,"line":248},"start":{"column":14,"line":248}}},{"id":"67","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    \"message\": \"Message sent successfully\",\n-   \"success\": true,\n+   \"success\": false,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:374:22)","status":"Killed","testsCompleted":53,"killedBy":["11"],"location":{"end":{"column":29,"line":248},"start":{"column":25,"line":248}}},{"id":"69","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\nExpected: {\"message\": \"Failed to send message: Notification failed\", \"success\": false}\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:389:22)","status":"Killed","testsCompleted":53,"killedBy":["12"],"location":{"end":{"column":6,"line":256},"start":{"column":21,"line":249}}},{"id":"71","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n- Object {\n-   \"message\": \"Failed to send message: Notification failed\",\n-   \"success\": false,\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:389:22)","status":"Killed","testsCompleted":53,"killedBy":["12"],"location":{"end":{"column":8,"line":255},"start":{"column":14,"line":252}}},{"id":"72","mutatorName":"BooleanLiteral","replacement":"true","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    \"message\": \"Failed to send message: Notification failed\",\n-   \"success\": false,\n+   \"success\": true,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:389:22)","status":"Killed","testsCompleted":53,"killedBy":["12"],"location":{"end":{"column":23,"line":253},"start":{"column":18,"line":253}}},{"id":"74","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"target-user-id\"\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:654:9)","status":"Killed","testsCompleted":53,"killedBy":["20"],"location":{"end":{"column":4,"line":272},"start":{"column":73,"line":260}}},{"id":"75","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 10\n+ Received  +  1\n\n- Object {\n-   \"adminId\": \"admin-id\",\n-   \"expiresAt\": Any<Date>,\n-   \"restrictions\": Array [\n-     \"read-only\",\n-     \"no-admin-actions\",\n-   ],\n-   \"targetUserId\": \"target-user-id\",\n-   \"token\": \"mock-token\",\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:655:22)","status":"Killed","testsCompleted":53,"killedBy":["20"],"location":{"end":{"column":6,"line":271},"start":{"column":12,"line":265}}},{"id":"76","mutatorName":"ArithmeticOperator","replacement":"Date.now() - 3600000","statusReason":"Error: expect(received).toBeGreaterThan(expected)\n\nExpected: > 1752280618581\nReceived:   1752277018581\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:666:42)","status":"Killed","testsCompleted":53,"killedBy":["20"],"location":{"end":{"column":47,"line":267},"start":{"column":27,"line":267}}},{"id":"77","mutatorName":"ArrayDeclaration","replacement":"[]","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 4\n+ Received  + 1\n\n  Object {\n    \"adminId\": \"admin-id\",\n    \"expiresAt\": Any<Date>,\n-   \"restrictions\": Array [\n-     \"read-only\",\n-     \"no-admin-actions\",\n-   ],\n+   \"restrictions\": Array [],\n    \"targetUserId\": \"target-user-id\",\n    \"token\": \"mock-token\",\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:655:22)","status":"Killed","testsCompleted":53,"killedBy":["20"],"location":{"end":{"column":54,"line":270},"start":{"column":21,"line":270}}},{"id":"80","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 3\nReceived number of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:443:30)","status":"Killed","testsCompleted":53,"killedBy":["14"],"location":{"end":{"column":4,"line":301},"start":{"column":60,"line":277}}},{"id":"81","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 3\nReceived number of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:443:30)","status":"Killed","testsCompleted":53,"killedBy":["14"],"location":{"end":{"column":6,"line":288},"start":{"column":35,"line":281}}},{"id":"82","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledTimes(expected)\n\nExpected number of calls: 3\nReceived number of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:443:30)","status":"Killed","testsCompleted":53,"killedBy":["14"],"location":{"end":{"column":8,"line":285},"start":{"column":11,"line":282}}},{"id":"83","mutatorName":"UpdateOperator","replacement":"deletedCount--","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_delete\",\n  [\"user1\", \"user2\", \"user3\"],\n  Object {\n    \"requestedCount\": 3,\n-   \"successCount\": 2,\n+   \"successCount\": -2,\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:444:51)","status":"Killed","testsCompleted":53,"killedBy":["14"],"location":{"end":{"column":23,"line":284},"start":{"column":9,"line":284}}},{"id":"84","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"Failed to delete user user2:\", Any<Error>\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:175:26)","status":"Killed","testsCompleted":53,"killedBy":["35"],"location":{"end":{"column":8,"line":287},"start":{"column":23,"line":285}}},{"id":"88","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:173:30)","status":"Killed","testsCompleted":53,"killedBy":["35"],"location":{"end":{"column":6,"line":300},"start":{"column":12,"line":296}}},{"id":"87","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_delete\",\n  [\"user1\", \"user2\", \"user3\"],\n- Object {\n-   \"requestedCount\": 3,\n-   \"successCount\": 2,\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:444:51)","status":"Killed","testsCompleted":53,"killedBy":["14"],"location":{"end":{"column":6,"line":294},"start":{"column":76,"line":291}}},{"id":"89","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:173:30)","status":"Killed","testsCompleted":53,"killedBy":["35"],"location":{"end":{"column":20,"line":297},"start":{"column":16,"line":297}}},{"id":"91","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user1\", {\"role\": \"USER\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:196:44)","status":"Killed","testsCompleted":53,"killedBy":["36"],"location":{"end":{"column":4,"line":332},"start":{"column":62,"line":303}}},{"id":"92","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user1\", {\"role\": \"USER\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:196:44)","status":"Killed","testsCompleted":53,"killedBy":["36"],"location":{"end":{"column":6,"line":314},"start":{"column":35,"line":307}}},{"id":"93","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"user1\", {\"role\": \"USER\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:196:44)","status":"Killed","testsCompleted":53,"killedBy":["36"],"location":{"end":{"column":8,"line":311},"start":{"column":11,"line":308}}},{"id":"94","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"user1\",\n- Object {\n-   \"role\": \"USER\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:196:44)","status":"Killed","testsCompleted":53,"killedBy":["36"],"location":{"end":{"column":43,"line":309},"start":{"column":35,"line":309}}},{"id":"95","mutatorName":"UpdateOperator","replacement":"updatedCount--","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_role\",\n  [\"user1\", \"user2\"],\n  Object {\n    \"newRole\": \"ADMIN\",\n    \"requestedCount\": 2,\n-   \"successCount\": 1,\n+   \"successCount\": -1,\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:487:51)","status":"Killed","testsCompleted":53,"killedBy":["15"],"location":{"end":{"column":23,"line":310},"start":{"column":9,"line":310}}},{"id":"96","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"Failed to update role for user user1:\", Any<Error>\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:222:26)","status":"Killed","testsCompleted":53,"killedBy":["37"],"location":{"end":{"column":8,"line":313},"start":{"column":23,"line":311}}},{"id":"99","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_role\",\n  [\"user1\", \"user2\"],\n- Object {\n-   \"newRole\": \"ADMIN\",\n-   \"requestedCount\": 2,\n-   \"successCount\": 1,\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:487:51)","status":"Killed","testsCompleted":53,"killedBy":["15"],"location":{"end":{"column":8,"line":324},"start":{"column":7,"line":320}}},{"id":"100","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 5\n+ Received  + 1\n\n- Object {\n-   \"affectedCount\": 1,\n-   \"message\": \"Successfully updated role for 1 out of 2 users\",\n-   \"success\": true,\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:497:22)","status":"Killed","testsCompleted":53,"killedBy":["15"],"location":{"end":{"column":6,"line":331},"start":{"column":12,"line":327}}},{"id":"101","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    \"affectedCount\": 1,\n    \"message\": \"Successfully updated role for 1 out of 2 users\",\n-   \"success\": true,\n+   \"success\": false,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:497:22)","status":"Killed","testsCompleted":53,"killedBy":["15"],"location":{"end":{"column":20,"line":328},"start":{"column":16,"line":328}}},{"id":"103","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"bulk_update_status\", [\"user1\", \"user2\"], {\"newStatus\": \"ACTIVE\", \"requestedCount\": 2, \"successCount\": 1}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:531:51)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":4,"line":363},"start":{"column":68,"line":334}}},{"id":"104","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_status\",\n  [\"user1\", \"user2\"],\n  Object {\n    \"newStatus\": \"ACTIVE\",\n    \"requestedCount\": 2,\n-   \"successCount\": 1,\n+   \"successCount\": 0,\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:531:51)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":6,"line":345},"start":{"column":35,"line":338}}},{"id":"105","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_status\",\n  [\"user1\", \"user2\"],\n  Object {\n    \"newStatus\": \"ACTIVE\",\n    \"requestedCount\": 2,\n-   \"successCount\": 1,\n+   \"successCount\": 0,\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:531:51)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":8,"line":342},"start":{"column":11,"line":339}}},{"id":"106","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"user1\",\n- Object {\n-   \"status\": \"ACTIVE\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:243:44)","status":"Killed","testsCompleted":53,"killedBy":["38"],"location":{"end":{"column":45,"line":340},"start":{"column":35,"line":340}}},{"id":"107","mutatorName":"UpdateOperator","replacement":"updatedCount--","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_status\",\n  [\"user1\", \"user2\"],\n  Object {\n    \"newStatus\": \"ACTIVE\",\n    \"requestedCount\": 2,\n-   \"successCount\": 1,\n+   \"successCount\": -1,\n  },\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:531:51)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":23,"line":341},"start":{"column":9,"line":341}}},{"id":"108","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"Failed to update status for user user1:\", Any<Error>\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:269:26)","status":"Killed","testsCompleted":53,"killedBy":["39"],"location":{"end":{"column":8,"line":344},"start":{"column":23,"line":342}}},{"id":"111","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n  \"bulk_update_status\",\n  [\"user1\", \"user2\"],\n- Object {\n-   \"newStatus\": \"ACTIVE\",\n-   \"requestedCount\": 2,\n-   \"successCount\": 1,\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:531:51)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":8,"line":355},"start":{"column":7,"line":351}}},{"id":"112","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 5\n+ Received  + 1\n\n- Object {\n-   \"affectedCount\": 1,\n-   \"message\": \"Successfully updated status for 1 out of 2 users\",\n-   \"success\": true,\n- }\n+ Object {}\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:541:22)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":6,"line":362},"start":{"column":12,"line":358}}},{"id":"113","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    \"affectedCount\": 1,\n    \"message\": \"Successfully updated status for 1 out of 2 users\",\n-   \"success\": true,\n+   \"success\": false,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:541:22)","status":"Killed","testsCompleted":53,"killedBy":["16"],"location":{"end":{"column":20,"line":359},"start":{"column":16,"line":359}}},{"id":"115","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalled()\n\nExpected number of calls: >= 1\nReceived number of calls:    0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:571:47)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":4,"line":401},"start":{"column":63,"line":365}}},{"id":"116","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: false\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:311:32)","status":"Killed","testsCompleted":53,"killedBy":["40"],"location":{"end":{"column":37,"line":366},"start":{"column":33,"line":366}}},{"id":"118","mutatorName":"UnaryOperator","replacement":"+8","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 8\nReceived: 4\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:685:43)","status":"Killed","testsCompleted":53,"killedBy":["21"],"location":{"end":{"column":61,"line":369},"start":{"column":59,"line":369}}},{"id":"117","mutatorName":"MethodExpression","replacement":"Math.random().toString(36)","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: 8\nReceived: 13\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:685:43)","status":"Killed","testsCompleted":53,"killedBy":["21"],"location":{"end":{"column":62,"line":369},"start":{"column":26,"line":369}}},{"id":"119","mutatorName":"BooleanLiteral","replacement":"true","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 3\n\n  Object {\n-   \"emailSent\": false,\n-   \"message\": \"Password reset completed\",\n+   \"emailSent\": true,\n+   \"message\": \"Password reset email sent\",\n    \"success\": true,\n-   \"tempPassword\": Any<String>,\n+   \"tempPassword\": undefined,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:607:22)","status":"Killed","testsCompleted":53,"killedBy":["18"],"location":{"end":{"column":26,"line":379},"start":{"column":21,"line":379}}},{"id":"122","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"message\": StringContaining \"Your password has been reset\", \"type\": \"warning\", \"userId\": \"user-id\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:579:54)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":6,"line":391},"start":{"column":20,"line":380}}},{"id":"123","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: {\"message\": StringContaining \"Your password has been reset\", \"type\": \"warning\", \"userId\": \"user-id\"}\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:579:54)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":8,"line":388},"start":{"column":11,"line":381}}},{"id":"124","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\n- Expected\n+ Received\n\n- Object {\n-   \"message\": StringContaining \"Your password has been reset\",\n-   \"type\": \"warning\",\n-   \"userId\": \"user-id\",\n- }\n+ Object {},\n\nNumber of calls: 1\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:579:54)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":10,"line":386},"start":{"column":59,"line":382}}},{"id":"127","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 3\n+ Received  + 3\n\n  Object {\n-   \"emailSent\": true,\n-   \"message\": \"Password reset email sent\",\n+   \"emailSent\": false,\n+   \"message\": \"Password reset completed\",\n    \"success\": true,\n-   \"tempPassword\": undefined,\n+   \"tempPassword\": \"heyvp9ea\",\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:585:22)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":25,"line":387},"start":{"column":21,"line":387}}},{"id":"128","mutatorName":"BlockStatement","replacement":"{}","statusReason":"Error: expect(jest.fn()).toHaveBeenCalledWith(...expected)\n\nExpected: \"Failed to send password reset email:\", Any<Error>\n\nNumber of calls: 0\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:375:26)","status":"Killed","testsCompleted":53,"killedBy":["42"],"location":{"end":{"column":8,"line":390},"start":{"column":23,"line":388}}},{"id":"130","mutatorName":"ObjectLiteral","replacement":"{}","statusReason":"Error: expect(received).toBe(expected) // Object.is equality\n\nExpected: true\nReceived: undefined\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.100-percent.spec.ts:311:32)","status":"Killed","testsCompleted":53,"killedBy":["40"],"location":{"end":{"column":6,"line":400},"start":{"column":12,"line":393}}},{"id":"131","mutatorName":"BooleanLiteral","replacement":"false","statusReason":"Error: expect(received).toEqual(expected) // deep equality\n\n- Expected  - 1\n+ Received  + 1\n\n  Object {\n    \"emailSent\": true,\n    \"message\": \"Password reset email sent\",\n-   \"success\": true,\n+   \"success\": false,\n    \"tempPassword\": undefined,\n  }\n    at Object.<anonymous> (/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api/.stryker-tmp/sandbox-C6za1G/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts:585:22)","status":"Killed","testsCompleted":53,"killedBy":["17"],"location":{"end":{"column":20,"line":394},"start":{"column":16,"line":394}}}],"source":"//  SOLID COMPLIANT: Facade Pattern - Maintains backward compatibility\n// packages/api/src/users/services/user-facade.service.ts\n\nimport { Injectable } from '@nestjs/common';\nimport { CreateUserDto } from '../dto/create-user.dto';\nimport { UpdateUserDto } from '../dto/update-user.dto';\nimport { LoginUserDto } from '../dto/login-user.dto';\nimport { FilterUsersDto } from '../dto/filter-users.dto';\nimport { UpdateUserTagsDto } from '../dto/update-user-tags.dto';\nimport { ChangePasswordDto } from '../dto/change-password.dto';\nimport {\n  BulkDeleteUsersDto,\n  BulkUpdateRoleDto,\n  BulkUpdateStatusDto,\n  ResetPasswordDto,\n} from '../dto/bulk-users.dto';\n\nimport { UserRepositoryService } from './user-repository.service';\nimport { UserAuthenticationService } from './user-authentication.service';\nimport { UserAnalyticsService } from './user-analytics.service.simple';\nimport { UserEventsService } from './user-events.service';\nimport { NotificationService } from '../../notification/notification.service';\n\n/**\n *  SOLID COMPLIANT: Facade Pattern Implementation\n *\n * This service maintains backward compatibility with the original UserService\n * while delegating responsibilities to specialized SRP-compliant services.\n *\n * Benefits:\n * - Maintains existing API contracts\n * - Enables gradual migration to SOLID architecture\n * - Provides single entry point for user operations\n * - Coordinates between specialized services\n */\n@Injectable()\nexport class UserFacadeService {\n  constructor(\n    private userRepository: UserRepositoryService,\n    private userAuthentication: UserAuthenticationService,\n    private userAnalytics: UserAnalyticsService,\n    private userEvents: UserEventsService,\n    private notificationService: NotificationService,\n  ) {}\n\n  //  SRP: Delegates to UserRepositoryService + UserEventsService\n  async create(createUserDto: CreateUserDto) {\n    const { password, ...userData } = createUserDto;\n\n    // Hash password using authentication service\n    const hashedPassword = await this.userAuthentication.hashPassword(password);\n\n    // Create user using repository service\n    const user = await this.userRepository.create({\n      ...userData,\n      password: hashedPassword,\n    });\n\n    // Get full user data for events\n    const fullUser = await this.userRepository.findByEmail(user.email);\n    if (fullUser) {\n      // Publish user created event\n      await this.userEvents.publishUserCreated(fullUser);\n    }\n\n    // Create welcome notification (optional, don't fail if it fails)\n    try {\n      await this.notificationService.createNotification({\n        userId: user.id,\n        message: `Welcome to Alkitu, ${user.name || user.email}!`,\n        type: 'info',\n        link: '/dashboard',\n      });\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      console.log(\n        'Warning: Could not create welcome notification:',\n        errorMessage,\n      );\n    }\n\n    return user;\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async findAll() {\n    return this.userRepository.findAll();\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async findAllWithFilters(filterDto: FilterUsersDto) {\n    return this.userRepository.findAllWithFilters(filterDto);\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async findOne(id: string) {\n    return this.userRepository.findById(id);\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async findByEmail(email: string) {\n    return this.userRepository.findByEmail(email);\n  }\n\n  //  SRP: Delegates to UserRepositoryService + UserEventsService\n  async update(id: string, updateUserDto: UpdateUserDto) {\n    // Get previous data for events\n    const previousUser = await this.userRepository.findById(id);\n\n    // Update user\n    const updatedUser = await this.userRepository.update(id, updateUserDto);\n\n    // Get full user data for events\n    const fullUser = await this.userRepository.findByEmail(updatedUser.email);\n    if (fullUser && previousUser) {\n      // Publish user updated event - convert UserResponse to User for events\n      await this.userEvents.publishUserUpdated(fullUser, {\n        id: previousUser.id,\n        email: previousUser.email,\n        name: previousUser.name,\n        lastName: previousUser.lastName,\n        contactNumber: previousUser.contactNumber,\n      });\n    }\n\n    return updatedUser;\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async updateTags(id: string, updateUserTagsDto: UpdateUserTagsDto) {\n    return this.userRepository.updateTags(id, updateUserTagsDto);\n  }\n\n  //  SRP: Delegates to UserRepositoryService + UserEventsService\n  async remove(id: string) {\n    // Get user data before deletion for events\n    const user = await this.userRepository.findById(id);\n\n    // Check if user exists\n    if (!user) {\n      throw new Error('User not found');\n    }\n\n    // Delete user\n    await this.userRepository.delete(id);\n\n    // Publish user deleted event\n    await this.userEvents.publishUserDeleted(id, {\n      id: user.id,\n      email: user.email,\n      name: user.name,\n      lastName: user.lastName,\n      contactNumber: user.contactNumber,\n    });\n\n    // Return success message for backward compatibility\n    return { message: 'User deleted successfully' };\n  }\n\n  //  SRP: Delegates to UserAuthenticationService + UserEventsService\n  async validateUser(loginDto: LoginUserDto) {\n    const authenticatedUser =\n      await this.userAuthentication.validateUser(loginDto);\n\n    if (authenticatedUser) {\n      // Publish login event\n      await this.userEvents.publishUserLoggedIn(authenticatedUser.id);\n    }\n\n    return authenticatedUser;\n  }\n\n  //  SRP: Delegates to UserRepositoryService\n  async updatePassword(id: string, hashedPassword: string) {\n    return this.userRepository.updatePassword(id, hashedPassword);\n  }\n\n  //  SRP: Delegates to UserAuthenticationService + UserEventsService\n  async changePassword(id: string, changePasswordDto: ChangePasswordDto) {\n    await this.userAuthentication.changePassword(id, changePasswordDto);\n\n    // Publish password changed event\n    await this.userEvents.publishUserPasswordChanged(id);\n\n    return { message: 'Password changed successfully' };\n  }\n\n  //  SRP: Delegates to UserRepositoryService + UserEventsService\n  async markEmailAsVerified(id: string) {\n    const result = await this.userRepository.markEmailAsVerified(id);\n\n    // Publish email verified event\n    await this.userEvents.publishUserEmailVerified(id);\n\n    return result;\n  }\n\n  //  SRP: Delegates to UserAnalyticsService\n  async getUserStats() {\n    return this.userAnalytics.getUserStats();\n  }\n\n  //  SRP: Delegates to UserAuthenticationService\n  async adminChangePassword(userId: string, newPassword: string) {\n    const hashedPassword =\n      await this.userAuthentication.hashPassword(newPassword);\n    await this.userRepository.updatePassword(userId, hashedPassword);\n\n    // Publish password changed event\n    await this.userEvents.publishUserPasswordChanged(userId);\n  }\n\n  //  SRP: Delegates to UserRepositoryService + UserEventsService\n  async anonymizeUser(userId: string) {\n    const anonymizedData = {\n      name: 'Anonymous User',\n      lastName: 'Anonymous',\n      email: `anonymous_${userId}@example.com`,\n      contactNumber: undefined, // Use undefined instead of null for UpdateUserDto\n    };\n\n    const user = await this.userRepository.update(userId, anonymizedData);\n\n    // Publish user updated event\n    const fullUser = await this.userRepository.findByEmail(user.email);\n    if (fullUser) {\n      await this.userEvents.publishUserUpdated(fullUser, { id: userId });\n    }\n\n    return {\n      success: true,\n      userId,\n      anonymizedFields: Object.keys(anonymizedData),\n      retainedFields: ['id', 'role', 'createdAt'],\n      timestamp: new Date(),\n    };\n  }\n\n  //  SRP: Delegates to NotificationService\n  async sendMessageToUser(userId: string, message: string) {\n    try {\n      await this.notificationService.createNotification({\n        userId,\n        message,\n        type: 'info',\n      });\n      return { success: true, message: 'Message sent successfully' };\n    } catch (error) {\n      const errorMessage =\n        error instanceof Error ? error.message : 'Unknown error';\n      return {\n        success: false,\n        message: `Failed to send message: ${errorMessage}`,\n      };\n    }\n  }\n\n  //  SRP: Delegates to UserAuthenticationService\n  async createImpersonationToken(adminId: string, targetUserId: string) {\n    // Simplified implementation - in production, use proper JWT\n    const token =\n      await this.userAuthentication.generatePasswordResetToken(targetUserId);\n\n    return {\n      token,\n      expiresAt: new Date(Date.now() + 3600000), // 1 hour\n      targetUserId,\n      adminId,\n      restrictions: ['read-only', 'no-admin-actions'],\n    };\n  }\n\n  // Bulk operations - these would be implemented by separate bulk services\n  // For now, we'll provide simplified implementations\n\n  async bulkDeleteUsers(bulkDeleteDto: BulkDeleteUsersDto) {\n    const { userIds } = bulkDeleteDto;\n    let deletedCount = 0;\n\n    for (const userId of userIds) {\n      try {\n        await this.remove(userId);\n        deletedCount++;\n      } catch (error) {\n        console.error(`Failed to delete user ${userId}:`, error);\n      }\n    }\n\n    // Publish bulk operation event\n    await this.userEvents.publishUserBulkOperation('bulk_delete', userIds, {\n      requestedCount: userIds.length,\n      successCount: deletedCount,\n    });\n\n    return {\n      success: true,\n      message: `Successfully deleted ${deletedCount} out of ${userIds.length} users`,\n      affectedCount: deletedCount,\n    };\n  }\n\n  async bulkUpdateRole(bulkUpdateRoleDto: BulkUpdateRoleDto) {\n    const { userIds, role } = bulkUpdateRoleDto;\n    let updatedCount = 0;\n\n    for (const userId of userIds) {\n      try {\n        await this.update(userId, { role });\n        updatedCount++;\n      } catch (error) {\n        console.error(`Failed to update role for user ${userId}:`, error);\n      }\n    }\n\n    // Publish bulk operation event\n    await this.userEvents.publishUserBulkOperation(\n      'bulk_update_role',\n      userIds,\n      {\n        newRole: role,\n        requestedCount: userIds.length,\n        successCount: updatedCount,\n      },\n    );\n\n    return {\n      success: true,\n      message: `Successfully updated role for ${updatedCount} out of ${userIds.length} users`,\n      affectedCount: updatedCount,\n    };\n  }\n\n  async bulkUpdateStatus(bulkUpdateStatusDto: BulkUpdateStatusDto) {\n    const { userIds, status } = bulkUpdateStatusDto;\n    let updatedCount = 0;\n\n    for (const userId of userIds) {\n      try {\n        await this.update(userId, { status });\n        updatedCount++;\n      } catch (error) {\n        console.error(`Failed to update status for user ${userId}:`, error);\n      }\n    }\n\n    // Publish bulk operation event\n    await this.userEvents.publishUserBulkOperation(\n      'bulk_update_status',\n      userIds,\n      {\n        newStatus: status,\n        requestedCount: userIds.length,\n        successCount: updatedCount,\n      },\n    );\n\n    return {\n      success: true,\n      message: `Successfully updated status for ${updatedCount} out of ${userIds.length} users`,\n      affectedCount: updatedCount,\n    };\n  }\n\n  async resetUserPassword(resetPasswordDto: ResetPasswordDto) {\n    const { userId, sendEmail = true } = resetPasswordDto;\n\n    // Generate temporary password\n    const tempPassword = Math.random().toString(36).slice(-8);\n\n    // Hash and update password\n    const hashedPassword =\n      await this.userAuthentication.hashPassword(tempPassword);\n    await this.userRepository.updatePassword(userId, hashedPassword);\n\n    // Publish password changed event\n    await this.userEvents.publishUserPasswordChanged(userId);\n\n    let emailSent = false;\n    if (sendEmail) {\n      try {\n        await this.notificationService.createNotification({\n          userId,\n          message: `Your password has been reset. Your temporary password is: ${tempPassword}`,\n          type: 'warning',\n        });\n        emailSent = true;\n      } catch (error) {\n        console.error('Failed to send password reset email:', error);\n      }\n    }\n\n    return {\n      success: true,\n      message: emailSent\n        ? 'Password reset email sent'\n        : 'Password reset completed',\n      tempPassword: emailSent ? undefined : tempPassword,\n      emailSent,\n    };\n  }\n}\n"}},"schemaVersion":"1.0","thresholds":{"high":85,"low":70,"break":60},"testFiles":{"src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts":{"tests":[{"id":"0","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test findByEmail method execution","location":{"start":{"column":6,"line":98}}},{"id":"1","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test updateTags method execution","location":{"start":{"column":6,"line":111}}},{"id":"2","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test updatePassword method execution","location":{"start":{"column":6,"line":139}}},{"id":"3","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test changePassword method execution and return object","location":{"start":{"column":6,"line":153}}},{"id":"4","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test markEmailAsVerified method execution","location":{"start":{"column":6,"line":177}}},{"id":"5","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test adminChangePassword method execution","location":{"start":{"column":6,"line":200}}},{"id":"6","name":"UserFacadeService - Mutant Killer Tests Uncovered Methods Tests should test anonymizeUser method execution and verify object literals","location":{"start":{"column":6,"line":220}}},{"id":"7","name":"UserFacadeService - Mutant Killer Tests Conditional Logic Tests should test if (!user) condition in update method","location":{"start":{"column":6,"line":270}}},{"id":"8","name":"UserFacadeService - Mutant Killer Tests Conditional Logic Tests should test if (authenticatedUser) condition in validateUser","location":{"start":{"column":6,"line":284}}},{"id":"9","name":"UserFacadeService - Mutant Killer Tests Conditional Logic Tests should test if (fullUser) condition in anonymizeUser","location":{"start":{"column":6,"line":303}}},{"id":"10","name":"UserFacadeService - Mutant Killer Tests Conditional Logic Tests should test if (fullUser) condition when user not found in anonymizeUser","location":{"start":{"column":6,"line":328}}},{"id":"11","name":"UserFacadeService - Mutant Killer Tests Notification Error Handling Tests should test sendMessageToUser success path and object literals","location":{"start":{"column":6,"line":352}}},{"id":"12","name":"UserFacadeService - Mutant Killer Tests Notification Error Handling Tests should test sendMessageToUser error handling","location":{"start":{"column":6,"line":380}}},{"id":"13","name":"UserFacadeService - Mutant Killer Tests Notification Error Handling Tests should test create method notification error handling","location":{"start":{"column":6,"line":395}}},{"id":"14","name":"UserFacadeService - Mutant Killer Tests Bulk Operations Error Handling Tests should test bulkDeleteUsers with individual errors","location":{"start":{"column":6,"line":428}}},{"id":"15","name":"UserFacadeService - Mutant Killer Tests Bulk Operations Error Handling Tests should test bulkUpdateRole with individual errors","location":{"start":{"column":6,"line":459}}},{"id":"16","name":"UserFacadeService - Mutant Killer Tests Bulk Operations Error Handling Tests should test bulkUpdateStatus with individual errors","location":{"start":{"column":6,"line":503}}},{"id":"17","name":"UserFacadeService - Mutant Killer Tests Password Reset Tests should test resetUserPassword with email sending enabled","location":{"start":{"column":6,"line":549}}},{"id":"18","name":"UserFacadeService - Mutant Killer Tests Password Reset Tests should test resetUserPassword with email sending disabled","location":{"start":{"column":6,"line":594}}},{"id":"19","name":"UserFacadeService - Mutant Killer Tests Password Reset Tests should test resetUserPassword with email notification failure","location":{"start":{"column":6,"line":615}}},{"id":"20","name":"UserFacadeService - Mutant Killer Tests Impersonation Token Tests should test createImpersonationToken and verify object literals","location":{"start":{"column":6,"line":640}}},{"id":"21","name":"UserFacadeService - Mutant Killer Tests Math and String Operations Tests should test Math.random operations in resetUserPassword","location":{"start":{"column":6,"line":670}}}],"source":"//  MUTANT KILLER TESTS: Specific tests to eliminate surviving mutants\r\n// packages/api/src/users/services/__tests__/user-facade.service.kill-mutants.spec.ts\r\n\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { UserFacadeService } from '../user-facade.service';\r\nimport { UserRepositoryService } from '../user-repository.service';\r\nimport { UserAuthenticationService } from '../user-authentication.service';\r\nimport { UserAnalyticsService } from '../user-analytics.service.simple';\r\nimport { UserEventsService } from '../user-events.service';\r\nimport { NotificationService } from '../../../notification/notification.service';\r\nimport { NotFoundException, ConflictException } from '@nestjs/common';\r\nimport { UserRole, UserStatus } from '@prisma/client';\r\nimport { UserFactory } from '../../../test/factories';\r\n\r\ndescribe('UserFacadeService - Mutant Killer Tests', () => {\r\n  let service: UserFacadeService;\r\n  let userRepository: jest.Mocked<UserRepositoryService>;\r\n  let userAuthentication: jest.Mocked<UserAuthenticationService>;\r\n  let userAnalytics: jest.Mocked<UserAnalyticsService>;\r\n  let userEvents: jest.Mocked<UserEventsService>;\r\n  let notificationService: jest.Mocked<NotificationService>;\r\n\r\n  beforeEach(async () => {\r\n    const mockUserRepository = {\r\n      create: jest.fn(),\r\n      findById: jest.fn(),\r\n      findByEmail: jest.fn(),\r\n      findAll: jest.fn(),\r\n      findAllWithFilters: jest.fn(),\r\n      update: jest.fn(),\r\n      updateTags: jest.fn(),\r\n      delete: jest.fn(),\r\n      updatePassword: jest.fn(),\r\n      markEmailAsVerified: jest.fn(),\r\n      updateLastLogin: jest.fn(),\r\n      exists: jest.fn(),\r\n      existsByEmail: jest.fn(),\r\n      count: jest.fn(),\r\n      countByFilters: jest.fn(),\r\n    };\r\n\r\n    const mockUserAuthentication = {\r\n      validateUser: jest.fn(),\r\n      hashPassword: jest.fn(),\r\n      comparePassword: jest.fn(),\r\n      changePassword: jest.fn(),\r\n      generatePasswordResetToken: jest.fn(),\r\n      verifyPasswordResetToken: jest.fn(),\r\n    };\r\n\r\n    const mockUserAnalytics = {\r\n      getUserStats: jest.fn(),\r\n      getEngagementMetrics: jest.fn(),\r\n      getActivityHistory: jest.fn(),\r\n      getGrowthStats: jest.fn(),\r\n    };\r\n\r\n    const mockUserEvents = {\r\n      publishUserCreated: jest.fn(),\r\n      publishUserUpdated: jest.fn(),\r\n      publishUserDeleted: jest.fn(),\r\n      publishUserLoggedIn: jest.fn(),\r\n      publishUserPasswordChanged: jest.fn(),\r\n      publishUserEmailVerified: jest.fn(),\r\n      publishUserBulkOperation: jest.fn(),\r\n    };\r\n\r\n    const mockNotificationService = {\r\n      createNotification: jest.fn(),\r\n      findByUserId: jest.fn(),\r\n      markAsRead: jest.fn(),\r\n      deleteNotification: jest.fn(),\r\n    };\r\n\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      providers: [\r\n        UserFacadeService,\r\n        { provide: UserRepositoryService, useValue: mockUserRepository },\r\n        {\r\n          provide: UserAuthenticationService,\r\n          useValue: mockUserAuthentication,\r\n        },\r\n        { provide: UserAnalyticsService, useValue: mockUserAnalytics },\r\n        { provide: UserEventsService, useValue: mockUserEvents },\r\n        { provide: NotificationService, useValue: mockNotificationService },\r\n      ],\r\n    }).compile();\r\n\r\n    service = module.get<UserFacadeService>(UserFacadeService);\r\n    userRepository = module.get(UserRepositoryService);\r\n    userAuthentication = module.get(UserAuthenticationService);\r\n    userAnalytics = module.get(UserAnalyticsService);\r\n    userEvents = module.get(UserEventsService);\r\n    notificationService = module.get(NotificationService);\r\n  });\r\n\r\n  describe('Uncovered Methods Tests', () => {\r\n    it('should test findByEmail method execution', async () => {\r\n      // Test the actual method call to kill BlockStatement mutant\r\n      const mockUser = UserFactory.create();\r\n      userRepository.findByEmail.mockResolvedValue(mockUser);\r\n\r\n      const result = await service.findByEmail('test@example.com');\r\n\r\n      expect(userRepository.findByEmail).toHaveBeenCalledWith(\r\n        'test@example.com',\r\n      );\r\n      expect(result).toEqual(mockUser);\r\n    });\r\n\r\n    it('should test updateTags method execution', async () => {\r\n      // Test the actual method call to kill BlockStatement mutant\r\n      const mockUserWithTags = {\r\n        id: 'user-id',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n        tags: [\r\n          { id: 'tag1', name: 'Tag 1' },\r\n          { id: 'tag2', name: 'Tag 2' },\r\n        ],\r\n      };\r\n      userRepository.updateTags.mockResolvedValue(mockUserWithTags);\r\n\r\n      const result = await service.updateTags('user-id', {\r\n        tagIds: ['tag1', 'tag2'],\r\n      });\r\n\r\n      expect(userRepository.updateTags).toHaveBeenCalledWith('user-id', {\r\n        tagIds: ['tag1', 'tag2'],\r\n      });\r\n      expect(result).toEqual(mockUserWithTags);\r\n    });\r\n\r\n    it('should test updatePassword method execution', async () => {\r\n      // Test the actual method call to kill BlockStatement mutant\r\n      const mockUser = UserFactory.create();\r\n      userRepository.updatePassword.mockResolvedValue(mockUser);\r\n\r\n      const result = await service.updatePassword('user-id', 'hashedPassword');\r\n\r\n      expect(userRepository.updatePassword).toHaveBeenCalledWith(\r\n        'user-id',\r\n        'hashedPassword',\r\n      );\r\n      expect(result).toEqual(mockUser);\r\n    });\r\n\r\n    it('should test changePassword method execution and return object', async () => {\r\n      // Test the actual method call and return object to kill BlockStatement and ObjectLiteral mutants\r\n      userAuthentication.changePassword.mockResolvedValue();\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n\r\n      const result = await service.changePassword('user-id', {\r\n        currentPassword: 'old',\r\n        newPassword: 'new',\r\n      });\r\n\r\n      expect(userAuthentication.changePassword).toHaveBeenCalledWith(\r\n        'user-id',\r\n        {\r\n          currentPassword: 'old',\r\n          newPassword: 'new',\r\n        },\r\n      );\r\n      expect(userEvents.publishUserPasswordChanged).toHaveBeenCalledWith(\r\n        'user-id',\r\n      );\r\n      expect(result).toEqual({ message: 'Password changed successfully' });\r\n      expect(result.message).toBe('Password changed successfully');\r\n    });\r\n\r\n    it('should test markEmailAsVerified method execution', async () => {\r\n      // Test the actual method call to kill BlockStatement mutant\r\n      const mockResult = {\r\n        id: 'user-id',\r\n        email: 'test@example.com',\r\n        emailVerified: new Date(),\r\n        name: 'Test',\r\n        lastName: 'User',\r\n      };\r\n      userRepository.markEmailAsVerified.mockResolvedValue(mockResult);\r\n      userEvents.publishUserEmailVerified.mockResolvedValue();\r\n\r\n      const result = await service.markEmailAsVerified('user-id');\r\n\r\n      expect(userRepository.markEmailAsVerified).toHaveBeenCalledWith(\r\n        'user-id',\r\n      );\r\n      expect(userEvents.publishUserEmailVerified).toHaveBeenCalledWith(\r\n        'user-id',\r\n      );\r\n      expect(result).toEqual(mockResult);\r\n    });\r\n\r\n    it('should test adminChangePassword method execution', async () => {\r\n      // Test the actual method call to kill BlockStatement mutant\r\n      userAuthentication.hashPassword.mockResolvedValue('hashedNewPassword');\r\n      userRepository.updatePassword.mockResolvedValue(UserFactory.create());\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n\r\n      await service.adminChangePassword('user-id', 'newPassword');\r\n\r\n      expect(userAuthentication.hashPassword).toHaveBeenCalledWith(\r\n        'newPassword',\r\n      );\r\n      expect(userRepository.updatePassword).toHaveBeenCalledWith(\r\n        'user-id',\r\n        'hashedNewPassword',\r\n      );\r\n      expect(userEvents.publishUserPasswordChanged).toHaveBeenCalledWith(\r\n        'user-id',\r\n      );\r\n    });\r\n\r\n    it('should test anonymizeUser method execution and verify object literals', async () => {\r\n      // Test the actual method call and verify object literals to kill BlockStatement and ObjectLiteral mutants\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'anonymous_user-id@example.com',\r\n        name: 'Anonymous User',\r\n        lastName: 'Anonymous',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n      const mockFullUser = UserFactory.create();\r\n\r\n      userRepository.update.mockResolvedValue(mockUser);\r\n      userRepository.findByEmail.mockResolvedValue(mockFullUser);\r\n      userEvents.publishUserUpdated.mockResolvedValue();\r\n\r\n      const result = await service.anonymizeUser('user-id');\r\n\r\n      // Verify anonymizedData object structure\r\n      expect(userRepository.update).toHaveBeenCalledWith('user-id', {\r\n        name: 'Anonymous User',\r\n        lastName: 'Anonymous',\r\n        email: 'anonymous_user-id@example.com',\r\n        contactNumber: undefined,\r\n      });\r\n\r\n      // Verify publishUserUpdated is called with proper object\r\n      expect(userEvents.publishUserUpdated).toHaveBeenCalledWith(mockFullUser, {\r\n        id: 'user-id',\r\n      });\r\n\r\n      // Verify return object structure\r\n      expect(result).toEqual({\r\n        success: true,\r\n        userId: 'user-id',\r\n        anonymizedFields: ['name', 'lastName', 'email', 'contactNumber'],\r\n        retainedFields: ['id', 'role', 'createdAt'],\r\n        timestamp: expect.any(Date),\r\n      });\r\n\r\n      // Verify specific properties to kill boolean and array mutants\r\n      expect(result.success).toBe(true);\r\n      expect(result.retainedFields).toEqual(['id', 'role', 'createdAt']);\r\n      expect(result.retainedFields.length).toBe(3);\r\n    });\r\n  });\r\n\r\n  describe('Conditional Logic Tests', () => {\r\n    it('should test if (!user) condition in update method', async () => {\r\n      // Test the conditional logic to kill BlockStatement mutant\r\n      userRepository.findById.mockResolvedValue(null);\r\n      userRepository.update.mockRejectedValue(\r\n        new NotFoundException('User not found'),\r\n      );\r\n\r\n      await expect(\r\n        service.update('non-existent-id', { name: 'New Name' }),\r\n      ).rejects.toThrow();\r\n\r\n      expect(userRepository.findById).toHaveBeenCalledWith('non-existent-id');\r\n    });\r\n\r\n    it('should test if (authenticatedUser) condition in validateUser', async () => {\r\n      // Test the conditional logic to kill BlockStatement mutant\r\n      const mockUser = UserFactory.create();\r\n      userAuthentication.validateUser.mockResolvedValue(mockUser);\r\n      userEvents.publishUserLoggedIn.mockResolvedValue();\r\n\r\n      const result = await service.validateUser({\r\n        email: 'test@example.com',\r\n        password: 'password',\r\n      });\r\n\r\n      expect(userAuthentication.validateUser).toHaveBeenCalledWith({\r\n        email: 'test@example.com',\r\n        password: 'password',\r\n      });\r\n      expect(userEvents.publishUserLoggedIn).toHaveBeenCalledWith(mockUser.id);\r\n      expect(result).toEqual(mockUser);\r\n    });\r\n\r\n    it('should test if (fullUser) condition in anonymizeUser', async () => {\r\n      // Test the conditional logic to kill BlockStatement mutant\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'anonymous_user-id@example.com',\r\n        name: 'Anonymous User',\r\n        lastName: 'Anonymous',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n      const mockFullUser = UserFactory.create();\r\n\r\n      userRepository.update.mockResolvedValue(mockUser);\r\n      userRepository.findByEmail.mockResolvedValue(mockFullUser);\r\n      userEvents.publishUserUpdated.mockResolvedValue();\r\n\r\n      await service.anonymizeUser('user-id');\r\n\r\n      expect(userEvents.publishUserUpdated).toHaveBeenCalledWith(mockFullUser, {\r\n        id: 'user-id',\r\n      });\r\n    });\r\n\r\n    it('should test if (fullUser) condition when user not found in anonymizeUser', async () => {\r\n      // Test the conditional logic when condition is false\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'anonymous_user-id@example.com',\r\n        name: 'Anonymous User',\r\n        lastName: 'Anonymous',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n\r\n      userRepository.update.mockResolvedValue(mockUser);\r\n      userRepository.findByEmail.mockResolvedValue(null);\r\n      userEvents.publishUserUpdated.mockResolvedValue();\r\n\r\n      await service.anonymizeUser('user-id');\r\n\r\n      expect(userEvents.publishUserUpdated).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('Notification Error Handling Tests', () => {\r\n    it('should test sendMessageToUser success path and object literals', async () => {\r\n      // Test success path to kill BlockStatement and ObjectLiteral mutants\r\n      notificationService.createNotification.mockResolvedValue({\r\n        id: 'notification-id',\r\n        userId: 'user-id',\r\n        message: 'Test message',\r\n        type: 'info',\r\n        link: null,\r\n        read: false,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      });\r\n\r\n      const result = await service.sendMessageToUser('user-id', 'Test message');\r\n\r\n      expect(notificationService.createNotification).toHaveBeenCalledWith({\r\n        userId: 'user-id',\r\n        message: 'Test message',\r\n        type: 'info',\r\n      });\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        message: 'Message sent successfully',\r\n      });\r\n      expect(result.success).toBe(true);\r\n    });\r\n\r\n    it('should test sendMessageToUser error handling', async () => {\r\n      // Test error path to kill BlockStatement and ObjectLiteral mutants\r\n      notificationService.createNotification.mockRejectedValue(\r\n        new Error('Notification failed'),\r\n      );\r\n\r\n      const result = await service.sendMessageToUser('user-id', 'Test message');\r\n\r\n      expect(result).toEqual({\r\n        success: false,\r\n        message: 'Failed to send message: Notification failed',\r\n      });\r\n      expect(result.success).toBe(false);\r\n    });\r\n\r\n    it('should test create method notification error handling', async () => {\r\n      // Test notification error in create method to kill BlockStatement mutant\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n      userRepository.create.mockResolvedValue(mockUser);\r\n      userEvents.publishUserCreated.mockResolvedValue();\r\n      notificationService.createNotification.mockRejectedValue(\r\n        new Error('Notification failed'),\r\n      );\r\n\r\n      // Should not throw error even if notification fails\r\n      const result = await service.create({\r\n        email: 'test@example.com',\r\n        password: 'hashedPassword',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        terms: true,\r\n      });\r\n\r\n      expect(result).toEqual(mockUser);\r\n      expect(notificationService.createNotification).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('Bulk Operations Error Handling Tests', () => {\r\n    it('should test bulkDeleteUsers with individual errors', async () => {\r\n      // Test error handling in bulk operations to kill BlockStatement mutants\r\n      jest\r\n        .spyOn(service, 'remove')\r\n        .mockResolvedValueOnce({ message: 'User deleted successfully' }) // First delete succeeds\r\n        .mockRejectedValueOnce(new Error('Delete failed')) // Second delete fails\r\n        .mockResolvedValueOnce({ message: 'User deleted successfully' }); // Third delete succeeds\r\n\r\n      userEvents.publishUserBulkOperation.mockResolvedValue();\r\n\r\n      const result = await service.bulkDeleteUsers({\r\n        userIds: ['user1', 'user2', 'user3'],\r\n      });\r\n\r\n      expect(service.remove).toHaveBeenCalledTimes(3);\r\n      expect(userEvents.publishUserBulkOperation).toHaveBeenCalledWith(\r\n        'bulk_delete',\r\n        ['user1', 'user2', 'user3'],\r\n        {\r\n          requestedCount: 3,\r\n          successCount: 2,\r\n        },\r\n      );\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        affectedCount: 2,\r\n        message: 'Successfully deleted 2 out of 3 users',\r\n      });\r\n    });\r\n\r\n    it('should test bulkUpdateRole with individual errors', async () => {\r\n      // Test error handling in bulk role updates to kill BlockStatement mutants\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n      userRepository.findById.mockResolvedValue(mockUser);\r\n\r\n      // Mock update to succeed for first user, fail for second\r\n      jest\r\n        .spyOn(service, 'update')\r\n        .mockResolvedValueOnce(mockUser)\r\n        .mockRejectedValueOnce(new Error('Update failed'));\r\n\r\n      userEvents.publishUserBulkOperation.mockResolvedValue();\r\n\r\n      const result = await service.bulkUpdateRole({\r\n        userIds: ['user1', 'user2'],\r\n        role: UserRole.ADMIN,\r\n      });\r\n\r\n      expect(userEvents.publishUserBulkOperation).toHaveBeenCalledWith(\r\n        'bulk_update_role',\r\n        ['user1', 'user2'],\r\n        {\r\n          newRole: UserRole.ADMIN,\r\n          requestedCount: 2,\r\n          successCount: 1,\r\n        },\r\n      );\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        affectedCount: 1,\r\n        message: 'Successfully updated role for 1 out of 2 users',\r\n      });\r\n    });\r\n\r\n    it('should test bulkUpdateStatus with individual errors', async () => {\r\n      // Test error handling in bulk status updates to kill BlockStatement mutants\r\n      const mockUser = {\r\n        id: 'user-id',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: null,\r\n        role: UserRole.USER,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n      userRepository.findById.mockResolvedValue(mockUser);\r\n\r\n      // Mock update to succeed for first user, fail for second\r\n      jest\r\n        .spyOn(service, 'update')\r\n        .mockResolvedValueOnce(mockUser)\r\n        .mockRejectedValueOnce(new Error('Update failed'));\r\n\r\n      userEvents.publishUserBulkOperation.mockResolvedValue();\r\n\r\n      const result = await service.bulkUpdateStatus({\r\n        userIds: ['user1', 'user2'],\r\n        status: UserStatus.ACTIVE,\r\n      });\r\n\r\n      expect(userEvents.publishUserBulkOperation).toHaveBeenCalledWith(\r\n        'bulk_update_status',\r\n        ['user1', 'user2'],\r\n        {\r\n          newStatus: UserStatus.ACTIVE,\r\n          requestedCount: 2,\r\n          successCount: 1,\r\n        },\r\n      );\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        affectedCount: 1,\r\n        message: 'Successfully updated status for 1 out of 2 users',\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Password Reset Tests', () => {\r\n    it('should test resetUserPassword with email sending enabled', async () => {\r\n      // Test the full method execution to kill BlockStatement mutants\r\n      userAuthentication.hashPassword.mockResolvedValue('hashedTempPassword');\r\n      userRepository.updatePassword.mockResolvedValue(UserFactory.create());\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n      notificationService.createNotification.mockResolvedValue({\r\n        id: 'notification-id',\r\n        userId: 'user-id',\r\n        message: 'Password reset message',\r\n        type: 'warning',\r\n        link: null,\r\n        read: false,\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n      });\r\n\r\n      const result = await service.resetUserPassword({\r\n        userId: 'user-id',\r\n        sendEmail: true,\r\n      });\r\n\r\n      expect(userAuthentication.hashPassword).toHaveBeenCalled();\r\n      expect(userRepository.updatePassword).toHaveBeenCalledWith(\r\n        'user-id',\r\n        'hashedTempPassword',\r\n      );\r\n      expect(userEvents.publishUserPasswordChanged).toHaveBeenCalledWith(\r\n        'user-id',\r\n      );\r\n      expect(notificationService.createNotification).toHaveBeenCalledWith({\r\n        userId: 'user-id',\r\n        message: expect.stringContaining('Your password has been reset'),\r\n        type: 'warning',\r\n      });\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        message: 'Password reset email sent',\r\n        tempPassword: undefined,\r\n        emailSent: true,\r\n      });\r\n      expect(result.success).toBe(true);\r\n      expect(result.emailSent).toBe(true);\r\n    });\r\n\r\n    it('should test resetUserPassword with email sending disabled', async () => {\r\n      // Test with sendEmail = false to kill BooleanLiteral mutant\r\n      userAuthentication.hashPassword.mockResolvedValue('hashedTempPassword');\r\n      userRepository.updatePassword.mockResolvedValue(UserFactory.create());\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n\r\n      const result = await service.resetUserPassword({\r\n        userId: 'user-id',\r\n        sendEmail: false,\r\n      });\r\n\r\n      expect(notificationService.createNotification).not.toHaveBeenCalled();\r\n      expect(result).toEqual({\r\n        success: true,\r\n        message: 'Password reset completed',\r\n        tempPassword: expect.any(String),\r\n        emailSent: false,\r\n      });\r\n      expect(result.emailSent).toBe(false);\r\n    });\r\n\r\n    it('should test resetUserPassword with email notification failure', async () => {\r\n      // Test notification failure to kill BlockStatement mutant\r\n      userAuthentication.hashPassword.mockResolvedValue('hashedTempPassword');\r\n      userRepository.updatePassword.mockResolvedValue(UserFactory.create());\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n      notificationService.createNotification.mockRejectedValue(\r\n        new Error('Email failed'),\r\n      );\r\n\r\n      const result = await service.resetUserPassword({\r\n        userId: 'user-id',\r\n        sendEmail: true,\r\n      });\r\n\r\n      expect(result).toEqual({\r\n        success: true,\r\n        message: 'Password reset completed',\r\n        tempPassword: expect.any(String),\r\n        emailSent: false,\r\n      });\r\n      expect(result.emailSent).toBe(false);\r\n    });\r\n  });\r\n\r\n  describe('Impersonation Token Tests', () => {\r\n    it('should test createImpersonationToken and verify object literals', async () => {\r\n      // Test the method execution to kill BlockStatement and ObjectLiteral mutants\r\n      userAuthentication.generatePasswordResetToken.mockResolvedValue(\r\n        'mock-token',\r\n      );\r\n\r\n      const result = await service.createImpersonationToken(\r\n        'admin-id',\r\n        'target-user-id',\r\n      );\r\n\r\n      expect(\r\n        userAuthentication.generatePasswordResetToken,\r\n      ).toHaveBeenCalledWith('target-user-id');\r\n      expect(result).toEqual({\r\n        token: 'mock-token',\r\n        expiresAt: expect.any(Date),\r\n        targetUserId: 'target-user-id',\r\n        adminId: 'admin-id',\r\n        restrictions: ['read-only', 'no-admin-actions'],\r\n      });\r\n\r\n      // Verify specific properties to kill mutants\r\n      expect(result.restrictions).toEqual(['read-only', 'no-admin-actions']);\r\n      expect(result.restrictions.length).toBe(2);\r\n      expect(result.expiresAt.getTime()).toBeGreaterThan(Date.now());\r\n    });\r\n  });\r\n\r\n  describe('Math and String Operations Tests', () => {\r\n    it('should test Math.random operations in resetUserPassword', async () => {\r\n      // Test Math.random and string operations to kill MethodExpression and UnaryOperator mutants\r\n      userAuthentication.hashPassword.mockResolvedValue('hashedTempPassword');\r\n      userRepository.updatePassword.mockResolvedValue(UserFactory.create());\r\n      userEvents.publishUserPasswordChanged.mockResolvedValue();\r\n\r\n      const result = await service.resetUserPassword({\r\n        userId: 'user-id',\r\n        sendEmail: false,\r\n      });\r\n\r\n      // Verify temp password is generated and has correct length\r\n      expect(result.tempPassword).toBeDefined();\r\n      expect(typeof result.tempPassword).toBe('string');\r\n      expect(result.tempPassword!.length).toBe(8); // slice(-8) should create 8 character string\r\n    });\r\n  });\r\n});\r\n"},"src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts":{"tests":[{"id":"22","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test notification creation with all fields","location":{"start":{"column":6,"line":146}}},{"id":"23","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should handle bulk operations with mixed success/failure","location":{"start":{"column":6,"line":185}}},{"id":"24","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test bulk role update with proper enums","location":{"start":{"column":6,"line":229}}},{"id":"25","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test bulk status update with proper enums","location":{"start":{"column":6,"line":272}}},{"id":"26","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test filter users with proper enum values","location":{"start":{"column":6,"line":315}}},{"id":"27","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should handle notification failures gracefully","location":{"start":{"column":6,"line":355}}},{"id":"28","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test error handling for all catch blocks","location":{"start":{"column":6,"line":398}}},{"id":"29","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test object literal returns","location":{"start":{"column":6,"line":417}}},{"id":"30","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test conditional logic with boolean operators","location":{"start":{"column":6,"line":440}}},{"id":"31","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test null/undefined handling","location":{"start":{"column":6,"line":456}}},{"id":"32","name":"UserFacadeService - Comprehensive Mutation Tests (Fixed) create - Comprehensive Tests should test empty object returns","location":{"start":{"column":6,"line":462}}}],"source":"//  Comprehensive Mutation Tests for UserFacadeService - Fixed Version\n// packages/api/src/users/services/__tests__/user-facade.service.comprehensive-fixed.spec.ts\n\nimport { Test, TestingModule } from '@nestjs/testing';\nimport { UserFacadeService } from '../user-facade.service';\nimport { UserRepositoryService } from '../user-repository.service';\nimport { UserAuthenticationService } from '../user-authentication.service';\nimport { UserAnalyticsService } from '../user-analytics.service.simple';\nimport { UserEventsService } from '../user-events.service';\nimport { NotificationService } from '../../../notification/notification.service';\nimport { CreateUserDto } from '../../dto/create-user.dto';\nimport { UpdateUserDto } from '../../dto/update-user.dto';\nimport { LoginUserDto } from '../../dto/login-user.dto';\nimport { FilterUsersDto } from '../../dto/filter-users.dto';\nimport {\n  BulkUpdateRoleDto,\n  BulkUpdateStatusDto,\n} from '../../dto/bulk-users.dto';\nimport { UserRole, UserStatus } from '@prisma/client';\nimport { UserFactory, NotificationFactory } from '../../../test/factories';\n\ndescribe('UserFacadeService - Comprehensive Mutation Tests (Fixed)', () => {\n  let service: UserFacadeService;\n  let userRepository: jest.Mocked<UserRepositoryService>;\n  let userAuthentication: jest.Mocked<UserAuthenticationService>;\n  let userAnalytics: jest.Mocked<UserAnalyticsService>;\n  let userEvents: jest.Mocked<UserEventsService>;\n  let notificationService: jest.Mocked<NotificationService>;\n  let module: TestingModule;\n\n  beforeEach(async () => {\n    const mockUserRepository = {\n      create: jest.fn(),\n      findById: jest.fn(),\n      findByEmail: jest.fn(),\n      findAll: jest.fn(),\n      findAllWithFilters: jest.fn(),\n      update: jest.fn(),\n      updateTags: jest.fn(),\n      delete: jest.fn(),\n      updatePassword: jest.fn(),\n      markEmailAsVerified: jest.fn(),\n      updateLastLogin: jest.fn(),\n      exists: jest.fn(),\n      existsByEmail: jest.fn(),\n      count: jest.fn(),\n      countByFilters: jest.fn(),\n    };\n\n    const mockUserAuthentication = {\n      validateUser: jest.fn(),\n      validatePassword: jest.fn(),\n      changePassword: jest.fn(),\n      hashPassword: jest.fn(),\n      generatePasswordResetToken: jest.fn(),\n      validatePasswordResetToken: jest.fn(),\n      invalidateUserSessions: jest.fn(),\n    };\n\n    const mockUserAnalytics = {\n      getUserStats: jest.fn(),\n      getUserGrowthStats: jest.fn(),\n      getUserActivityStats: jest.fn(),\n      getUserDemographics: jest.fn(),\n      getUserRetentionStats: jest.fn(),\n      getUsersByRole: jest.fn(),\n      getUsersByStatus: jest.fn(),\n      getActiveUsersCount: jest.fn(),\n      getInactiveUsersCount: jest.fn(),\n      getLoginFrequencyStats: jest.fn(),\n      getUserEngagementScore: jest.fn(),\n      getTopActiveUsers: jest.fn(),\n    };\n\n    const mockUserEvents = {\n      publishUserCreated: jest.fn(),\n      publishUserUpdated: jest.fn(),\n      publishUserDeleted: jest.fn(),\n      publishUserPasswordChanged: jest.fn(),\n      publishUserEmailVerified: jest.fn(),\n      publishUserLoggedIn: jest.fn(),\n      publishUserRoleChanged: jest.fn(),\n      publishUserBulkOperation: jest.fn(),\n    };\n\n    const mockNotificationService = {\n      create: jest.fn(),\n      findAll: jest.fn(),\n      findOne: jest.fn(),\n      update: jest.fn(),\n      remove: jest.fn(),\n      markAsRead: jest.fn(),\n      markAllAsRead: jest.fn(),\n      sendNotification: jest.fn(),\n      createNotification: jest.fn(),\n    };\n\n    module = await Test.createTestingModule({\n      providers: [\n        UserFacadeService,\n        { provide: UserRepositoryService, useValue: mockUserRepository },\n        {\n          provide: UserAuthenticationService,\n          useValue: mockUserAuthentication,\n        },\n        { provide: UserAnalyticsService, useValue: mockUserAnalytics },\n        { provide: UserEventsService, useValue: mockUserEvents },\n        { provide: NotificationService, useValue: mockNotificationService },\n      ],\n    }).compile();\n\n    service = module.get<UserFacadeService>(UserFacadeService);\n    userRepository = module.get<UserRepositoryService>(\n      UserRepositoryService,\n    ) as jest.Mocked<UserRepositoryService>;\n    userAuthentication = module.get<UserAuthenticationService>(\n      UserAuthenticationService,\n    ) as jest.Mocked<UserAuthenticationService>;\n    userAnalytics = module.get<UserAnalyticsService>(\n      UserAnalyticsService,\n    ) as jest.Mocked<UserAnalyticsService>;\n    userEvents = module.get<UserEventsService>(\n      UserEventsService,\n    ) as jest.Mocked<UserEventsService>;\n    notificationService = module.get<NotificationService>(\n      NotificationService,\n    ) as jest.Mocked<NotificationService>;\n\n    jest.clearAllMocks();\n  });\n\n  afterEach(async () => {\n    await module.close();\n  });\n\n  describe('create - Comprehensive Tests', () => {\n    const createUserDto: CreateUserDto = {\n      email: 'test@example.com',\n      password: 'password123',\n      name: 'Test',\n      lastName: 'User',\n      contactNumber: '+1234567890',\n      terms: true,\n    };\n\n    it('should test notification creation with all fields', async () => {\n      const hashedPassword = 'hashedPassword123';\n      const createdUser = {\n        id: '1',\n        email: 'test@example.com',\n        name: 'Test',\n        lastName: 'User',\n        contactNumber: '+1234567890',\n        role: UserRole.USER,\n        createdAt: new Date(),\n        lastLogin: null,\n      };\n      const fullUser = UserFactory.create({\n        id: '1',\n        email: 'test@example.com',\n        name: 'Test',\n        lastName: 'User',\n        password: hashedPassword,\n        emailVerified: null,\n      });\n      const notification = NotificationFactory.createWelcome();\n\n      userAuthentication.hashPassword.mockResolvedValue(hashedPassword);\n      userRepository.create.mockResolvedValue(createdUser);\n      userRepository.findByEmail.mockResolvedValue(fullUser);\n      userEvents.publishUserCreated.mockResolvedValue(undefined);\n      notificationService.createNotification.mockResolvedValue(notification);\n\n      const result = await service.create(createUserDto);\n\n      expect(result).toEqual(createdUser);\n      expect(notificationService.createNotification).toHaveBeenCalledWith({\n        userId: '1',\n        message: 'Welcome to Alkitu, Test!',\n        type: 'info',\n        link: '/dashboard',\n      });\n    });\n\n    it('should handle bulk operations with mixed success/failure', async () => {\n      const userIds = ['id1', 'id2', 'id3'];\n      const users = [\n        UserFactory.create({ id: 'id1' }),\n        UserFactory.create({ id: 'id2' }),\n        UserFactory.create({ id: 'id3' }),\n      ];\n\n      // Mock partial failures\n      userRepository.findById\n        .mockResolvedValueOnce({\n          id: 'id1',\n          email: 'user1@test.com',\n          name: 'User1',\n          lastName: 'Test',\n          contactNumber: null,\n          role: UserRole.USER,\n          createdAt: new Date(),\n          lastLogin: null,\n        })\n        .mockResolvedValueOnce(null) // user not found\n        .mockResolvedValueOnce({\n          id: 'id3',\n          email: 'user3@test.com',\n          name: 'User3',\n          lastName: 'Test',\n          contactNumber: null,\n          role: UserRole.USER,\n          createdAt: new Date(),\n          lastLogin: null,\n        });\n\n      userRepository.delete\n        .mockResolvedValueOnce(undefined) // success\n        .mockResolvedValueOnce(undefined); // success\n\n      userEvents.publishUserDeleted.mockResolvedValue(undefined);\n\n      const result = await service.bulkDeleteUsers({ userIds });\n\n      expect(result.success).toBe(true);\n      expect(result.affectedCount).toBe(2); // Only 2 users found and deleted\n    });\n\n    it('should test bulk role update with proper enums', async () => {\n      const bulkUpdateRoleDto: BulkUpdateRoleDto = {\n        userIds: ['id1', 'id2'],\n        role: UserRole.ADMIN,\n      };\n\n      const users = [\n        UserFactory.create({ id: 'id1' }),\n        UserFactory.create({ id: 'id2' }),\n      ];\n\n      userRepository.findByEmail\n        .mockResolvedValueOnce(users[0])\n        .mockResolvedValueOnce(users[1]);\n\n      userRepository.update\n        .mockResolvedValueOnce({\n          id: 'id1',\n          email: 'user1@example.com',\n          name: 'User1',\n          lastName: 'Test',\n          contactNumber: '+1234567890',\n          role: UserRole.ADMIN,\n          createdAt: new Date(),\n          lastLogin: null,\n        })\n        .mockResolvedValueOnce({\n          id: 'id2',\n          email: 'user2@example.com',\n          name: 'User2',\n          lastName: 'Test',\n          contactNumber: '+1234567890',\n          role: UserRole.ADMIN,\n          createdAt: new Date(),\n          lastLogin: null,\n        });\n\n      const result = await service.bulkUpdateRole(bulkUpdateRoleDto);\n\n      expect(result.success).toBe(true);\n      expect(result.affectedCount).toBe(2);\n    });\n\n    it('should test bulk status update with proper enums', async () => {\n      const bulkUpdateStatusDto: BulkUpdateStatusDto = {\n        userIds: ['id1', 'id2'],\n        status: UserStatus.ACTIVE,\n      };\n\n      const users = [\n        UserFactory.create({ id: 'id1' }),\n        UserFactory.create({ id: 'id2' }),\n      ];\n\n      userRepository.findByEmail\n        .mockResolvedValueOnce(users[0])\n        .mockResolvedValueOnce(users[1]);\n\n      userRepository.update\n        .mockResolvedValueOnce({\n          id: 'id1',\n          email: 'user1@example.com',\n          name: 'User1',\n          lastName: 'Test',\n          contactNumber: '+1234567890',\n          role: UserRole.USER,\n          createdAt: new Date(),\n          lastLogin: null,\n        })\n        .mockResolvedValueOnce({\n          id: 'id2',\n          email: 'user2@example.com',\n          name: 'User2',\n          lastName: 'Test',\n          contactNumber: '+1234567890',\n          role: UserRole.USER,\n          createdAt: new Date(),\n          lastLogin: null,\n        });\n\n      const result = await service.bulkUpdateStatus(bulkUpdateStatusDto);\n\n      expect(result.success).toBe(true);\n      expect(result.affectedCount).toBe(2);\n    });\n\n    it('should test filter users with proper enum values', async () => {\n      const filterDto: FilterUsersDto = {\n        role: UserRole.USER,\n        page: 1,\n        limit: 10,\n      };\n\n      const users = [\n        {\n          id: '1',\n          email: 'user1@example.com',\n          name: 'User1',\n          lastName: 'Test',\n          contactNumber: '+1234567890',\n          role: UserRole.USER,\n          createdAt: new Date(),\n          lastLogin: null,\n        },\n      ];\n\n      const paginatedResponse = {\n        users,\n        pagination: {\n          page: 1,\n          limit: 10,\n          total: 1,\n          totalPages: 1,\n          hasNext: false,\n          hasPrev: false,\n        },\n      };\n\n      userRepository.findAllWithFilters.mockResolvedValue(paginatedResponse);\n\n      const result = await service.findAllWithFilters(filterDto);\n\n      expect(result).toEqual(paginatedResponse);\n      expect(userRepository.findAllWithFilters).toHaveBeenCalledWith(filterDto);\n    });\n\n    it('should handle notification failures gracefully', async () => {\n      const createUserDto: CreateUserDto = {\n        email: 'test@example.com',\n        password: 'password123',\n        name: 'Test',\n        lastName: 'User',\n        contactNumber: '+1234567890',\n        terms: true,\n      };\n\n      const hashedPassword = 'hashedPassword123';\n      const createdUser = {\n        id: '1',\n        email: 'test@example.com',\n        name: 'Test',\n        lastName: 'User',\n        contactNumber: '+1234567890',\n        role: UserRole.USER,\n        createdAt: new Date(),\n        lastLogin: null,\n      };\n      const fullUser = UserFactory.create({\n        id: '1',\n        email: 'test@example.com',\n        name: 'Test',\n        lastName: 'User',\n        password: hashedPassword,\n      });\n\n      userAuthentication.hashPassword.mockResolvedValue(hashedPassword);\n      userRepository.create.mockResolvedValue(createdUser);\n      userRepository.findByEmail.mockResolvedValue(fullUser);\n      userEvents.publishUserCreated.mockResolvedValue(undefined);\n      notificationService.createNotification.mockRejectedValue(\n        new Error('Notification service unavailable'),\n      );\n\n      // Should not fail user creation if notification fails\n      const result = await service.create(createUserDto);\n      expect(result).toBeDefined();\n      expect(userRepository.create).toHaveBeenCalled();\n    });\n\n    it('should test error handling for all catch blocks', async () => {\n      const createUserDto: CreateUserDto = {\n        email: 'test@example.com',\n        password: 'password123',\n        name: 'Test',\n        lastName: 'User',\n        contactNumber: '+1234567890',\n        terms: true,\n      };\n\n      userAuthentication.hashPassword.mockRejectedValue(\n        new Error('Hash failed'),\n      );\n\n      await expect(service.create(createUserDto)).rejects.toThrow(\n        'Hash failed',\n      );\n    });\n\n    it('should test object literal returns', async () => {\n      const expectedStats = {\n        total: 100,\n        active: 75,\n        inactive: 25,\n        verified: 50,\n        unverified: 50,\n        recentSignups: 10,\n        deletedRecently: 5,\n      };\n\n      userAnalytics.getUserStats.mockResolvedValue(expectedStats);\n\n      const result = await service.getUserStats();\n\n      expect(result).toHaveProperty('total');\n      expect(result).toHaveProperty('active');\n      expect(result).toHaveProperty('inactive');\n      expect(result.total).toBe(100);\n      expect(result.active).toBe(75);\n      expect(result.inactive).toBe(25);\n    });\n\n    it('should test conditional logic with boolean operators', async () => {\n      const userId = '1';\n\n      // Test findOne method (which exists)\n      userRepository.findById.mockResolvedValue(\n        UserFactory.create({ id: userId }),\n      );\n      const result1 = await service.findOne(userId);\n      expect(result1).toBeDefined();\n\n      // Test null return\n      userRepository.findById.mockResolvedValue(null);\n      const result2 = await service.findOne(userId);\n      expect(result2).toBeNull();\n    });\n\n    it('should test null/undefined handling', async () => {\n      userRepository.findById.mockResolvedValue(null);\n      const result = await service.findOne('non-existent');\n      expect(result).toBeNull();\n    });\n\n    it('should test empty object returns', async () => {\n      userRepository.findById.mockResolvedValue(null);\n      const result = await service.findOne('non-existent');\n      expect(result).toBeNull();\n    });\n  });\n});\n"},"src/users/services/__tests__/user-facade.service.100-percent.spec.ts":{"tests":[{"id":"33","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #1: Catch Block in Create Method (Line 74) should execute catch block when notification service throws error","location":{"start":{"column":6,"line":103}}},{"id":"34","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #2: If (!user) Block in Update Method (Line 141) should throw error when user is not found in remove method","location":{"start":{"column":6,"line":140}}},{"id":"35","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #3: Catch Block in BulkDeleteUsers (Line 285) should execute catch block when individual delete fails","location":{"start":{"column":6,"line":153}}},{"id":"36","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #4: Object Literal { role } in BulkUpdateRole (Line 309) should verify role object literal in bulkUpdateRole","location":{"start":{"column":6,"line":184}}},{"id":"37","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #5: Catch Block in BulkUpdateRole (Line 311) should execute catch block when role update fails","location":{"start":{"column":6,"line":202}}},{"id":"38","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #6: Object Literal { status } in BulkUpdateStatus (Line 340) should verify status object literal in bulkUpdateStatus","location":{"start":{"column":6,"line":231}}},{"id":"39","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #7: Catch Block in BulkUpdateStatus (Line 342) should execute catch block when status update fails","location":{"start":{"column":6,"line":249}}},{"id":"40","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #8: Boolean Literal sendEmail = true vs false (Line 366) should test default sendEmail = true behavior","location":{"start":{"column":6,"line":278}}},{"id":"41","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #8: Boolean Literal sendEmail = true vs false (Line 366) should test explicit sendEmail = false behavior","location":{"start":{"column":6,"line":314}}},{"id":"42","name":"UserFacadeService - 100% Mutation Coverage Surviving Mutant #9: Catch Block in ResetUserPassword (Line 388) should execute catch block when email send fails","location":{"start":{"column":6,"line":343}}}],"source":"//  100% MUTATION COVERAGE: Specific tests to kill remaining 9 surviving mutants\r\n// packages/api/src/users/services/__tests__/user-facade.service.100-percent.spec.ts\r\n\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { UserFacadeService } from '../user-facade.service';\r\nimport { UserRepositoryService } from '../user-repository.service';\r\nimport { UserAuthenticationService } from '../user-authentication.service';\r\nimport { UserAnalyticsService } from '../user-analytics.service.simple';\r\nimport { UserEventsService } from '../user-events.service';\r\nimport { NotificationService } from '../../../notification/notification.service';\r\nimport { EmailService } from '../../../email/email.service';\r\nimport { UserFactory } from '../../../test/factories';\r\nimport { CreateUserDto } from '../../dto/create-user.dto';\r\nimport { UpdateUserDto } from '../../dto/update-user.dto';\r\nimport { ResetPasswordDto, BulkDeleteUsersDto } from '../../dto/bulk-users.dto';\r\nimport { UserRole, UserStatus } from '@prisma/client';\r\n\r\ndescribe('UserFacadeService - 100% Mutation Coverage', () => {\r\n  let service: UserFacadeService;\r\n  let userRepositoryService: jest.Mocked<UserRepositoryService>;\r\n  let userAuthService: jest.Mocked<UserAuthenticationService>;\r\n  let userAnalyticsService: jest.Mocked<UserAnalyticsService>;\r\n  let userEventsService: jest.Mocked<UserEventsService>;\r\n  let notificationService: jest.Mocked<NotificationService>;\r\n  let emailService: jest.Mocked<EmailService>;\r\n\r\n  beforeEach(async () => {\r\n    const mockUserRepository = {\r\n      create: jest.fn(),\r\n      findById: jest.fn(),\r\n      findByEmail: jest.fn(),\r\n      update: jest.fn(),\r\n      delete: jest.fn(),\r\n      findAll: jest.fn(),\r\n      updateTags: jest.fn(),\r\n      updatePassword: jest.fn(),\r\n      markEmailAsVerified: jest.fn(),\r\n      adminChangePassword: jest.fn(),\r\n      anonymizeUser: jest.fn(),\r\n      bulkDeleteUsers: jest.fn(),\r\n      bulkUpdateRole: jest.fn(),\r\n      bulkUpdateStatus: jest.fn(),\r\n      filterUsers: jest.fn(),\r\n    };\r\n\r\n    const mockUserAuth = {\r\n      validateUser: jest.fn(),\r\n      changePassword: jest.fn(),\r\n      resetUserPassword: jest.fn(),\r\n      createImpersonationToken: jest.fn(),\r\n      hashPassword: jest.fn(),\r\n      generatePasswordResetToken: jest.fn(),\r\n    };\r\n\r\n    const mockUserAnalytics = {\r\n      getUserStats: jest.fn(),\r\n    };\r\n\r\n    const mockUserEvents = {\r\n      sendMessageToUser: jest.fn(),\r\n      publishUserCreated: jest.fn(),\r\n      publishUserUpdated: jest.fn(),\r\n      publishUserDeleted: jest.fn(),\r\n      publishUserLoggedIn: jest.fn(),\r\n      publishUserPasswordChanged: jest.fn(),\r\n      publishUserEmailVerified: jest.fn(),\r\n      publishUserBulkOperation: jest.fn(),\r\n    };\r\n\r\n    const mockNotificationService = {\r\n      createNotification: jest.fn(),\r\n      findByUserId: jest.fn(),\r\n      markAsRead: jest.fn(),\r\n      deleteNotification: jest.fn(),\r\n    };\r\n\r\n    const mockEmailService = {\r\n      sendPasswordResetEmail: jest.fn(),\r\n    };\r\n\r\n    const module: TestingModule = await Test.createTestingModule({\r\n      providers: [\r\n        UserFacadeService,\r\n        { provide: UserRepositoryService, useValue: mockUserRepository },\r\n        { provide: UserAuthenticationService, useValue: mockUserAuth },\r\n        { provide: UserAnalyticsService, useValue: mockUserAnalytics },\r\n        { provide: UserEventsService, useValue: mockUserEvents },\r\n        { provide: NotificationService, useValue: mockNotificationService },\r\n        { provide: EmailService, useValue: mockEmailService },\r\n      ],\r\n    }).compile();\r\n\r\n    service = module.get<UserFacadeService>(UserFacadeService);\r\n    userRepositoryService = module.get(UserRepositoryService);\r\n    userAuthService = module.get(UserAuthenticationService);\r\n    userAnalyticsService = module.get(UserAnalyticsService);\r\n    userEventsService = module.get(UserEventsService);\r\n    notificationService = module.get(NotificationService);\r\n    emailService = module.get(EmailService);\r\n  });\r\n\r\n  describe('Surviving Mutant #1: Catch Block in Create Method (Line 74)', () => {\r\n    it('should execute catch block when notification service throws error', async () => {\r\n      // Arrange\r\n      const createUserDto: CreateUserDto = {\r\n        email: 'test@example.com',\r\n        password: 'password123',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        terms: true,\r\n      };\r\n      const mockUser = UserFactory.create();\r\n\r\n      userRepositoryService.create.mockResolvedValue(mockUser);\r\n      userAuthService.hashPassword.mockResolvedValue('hashed-password');\r\n      userEventsService.publishUserCreated.mockResolvedValue(undefined);\r\n      // Force notification service to throw error to trigger catch block\r\n      notificationService.createNotification.mockRejectedValue(\r\n        new Error('Notification service error'),\r\n      );\r\n\r\n      // Spy on console.log to verify catch block execution\r\n      const consoleSpy = jest.spyOn(console, 'log').mockImplementation();\r\n\r\n      // Act\r\n      const result = await service.create(createUserDto);\r\n\r\n      // Assert - The result should be the user returned by the repository\r\n      expect(result).toEqual(mockUser);\r\n      expect(consoleSpy).toHaveBeenCalledWith(\r\n        'Warning: Could not create welcome notification:',\r\n        'Notification service error',\r\n      );\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #2: If (!user) Block in Update Method (Line 141)', () => {\r\n    it('should throw error when user is not found in remove method', async () => {\r\n      // Arrange\r\n      const userId = 'non-existent-user-id';\r\n\r\n      userRepositoryService.findById.mockResolvedValue(null);\r\n\r\n      // Act & Assert\r\n      await expect(service.remove(userId)).rejects.toThrow('User not found');\r\n      expect(userRepositoryService.findById).toHaveBeenCalledWith(userId);\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #3: Catch Block in BulkDeleteUsers (Line 285)', () => {\r\n    it('should execute catch block when individual delete fails', async () => {\r\n      // Arrange\r\n      const bulkDeleteDto: BulkDeleteUsersDto = {\r\n        userIds: ['user1', 'user2'],\r\n      };\r\n\r\n      // Mock first delete to succeed, second to fail\r\n      service.remove = jest\r\n        .fn()\r\n        .mockResolvedValueOnce({ message: 'User deleted successfully' })\r\n        .mockRejectedValueOnce(new Error('Delete failed'));\r\n\r\n      // Spy on console.error to verify catch block execution\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      // Act\r\n      const result = await service.bulkDeleteUsers(bulkDeleteDto);\r\n\r\n      // Assert\r\n      expect(result.success).toBe(true);\r\n      expect(result.affectedCount).toBe(1);\r\n      expect(consoleSpy).toHaveBeenCalledWith(\r\n        'Failed to delete user user2:',\r\n        expect.any(Error),\r\n      );\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #4: Object Literal { role } in BulkUpdateRole (Line 309)', () => {\r\n    it('should verify role object literal in bulkUpdateRole', async () => {\r\n      // Arrange\r\n      const userIds = ['user1'];\r\n      const role = UserRole.USER;\r\n\r\n      userRepositoryService.update.mockResolvedValue(UserFactory.create());\r\n\r\n      // Act\r\n      await service.bulkUpdateRole({ userIds, role });\r\n\r\n      // Assert - Verify that update is called with { role } object literal\r\n      expect(userRepositoryService.update).toHaveBeenCalledWith('user1', {\r\n        role,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #5: Catch Block in BulkUpdateRole (Line 311)', () => {\r\n    it('should execute catch block when role update fails', async () => {\r\n      // Arrange\r\n      const userIds = ['user1'];\r\n      const role = UserRole.USER;\r\n\r\n      userRepositoryService.update.mockRejectedValue(\r\n        new Error('Update failed'),\r\n      );\r\n      userEventsService.publishUserBulkOperation.mockResolvedValue(undefined);\r\n\r\n      // Spy on console.error to verify catch block execution\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      // Act\r\n      const result = await service.bulkUpdateRole({ userIds, role });\r\n\r\n      // Assert\r\n      expect(result.success).toBe(true); // The method always returns success: true\r\n      expect(result.affectedCount).toBe(0);\r\n      expect(consoleSpy).toHaveBeenCalledWith(\r\n        'Failed to update role for user user1:',\r\n        expect.any(Error),\r\n      );\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #6: Object Literal { status } in BulkUpdateStatus (Line 340)', () => {\r\n    it('should verify status object literal in bulkUpdateStatus', async () => {\r\n      // Arrange\r\n      const userIds = ['user1'];\r\n      const status = UserStatus.ACTIVE;\r\n\r\n      userRepositoryService.update.mockResolvedValue(UserFactory.create());\r\n\r\n      // Act\r\n      await service.bulkUpdateStatus({ userIds, status });\r\n\r\n      // Assert - Verify that update is called with { status } object literal\r\n      expect(userRepositoryService.update).toHaveBeenCalledWith('user1', {\r\n        status,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #7: Catch Block in BulkUpdateStatus (Line 342)', () => {\r\n    it('should execute catch block when status update fails', async () => {\r\n      // Arrange\r\n      const userIds = ['user1'];\r\n      const status = UserStatus.ACTIVE;\r\n\r\n      userRepositoryService.update.mockRejectedValue(\r\n        new Error('Status update failed'),\r\n      );\r\n      userEventsService.publishUserBulkOperation.mockResolvedValue(undefined);\r\n\r\n      // Spy on console.error to verify catch block execution\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      // Act\r\n      const result = await service.bulkUpdateStatus({ userIds, status });\r\n\r\n      // Assert\r\n      expect(result.success).toBe(true); // The method always returns success: true\r\n      expect(result.affectedCount).toBe(0);\r\n      expect(consoleSpy).toHaveBeenCalledWith(\r\n        'Failed to update status for user user1:',\r\n        expect.any(Error),\r\n      );\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #8: Boolean Literal sendEmail = true vs false (Line 366)', () => {\r\n    it('should test default sendEmail = true behavior', async () => {\r\n      // Arrange\r\n      const resetPasswordDto: ResetPasswordDto = {\r\n        userId: 'user1',\r\n        // sendEmail not specified, should default to true\r\n      };\r\n\r\n      userRepositoryService.findById.mockResolvedValue(UserFactory.create());\r\n      userAuthService.hashPassword = jest\r\n        .fn()\r\n        .mockResolvedValue('hashed-temp-password');\r\n      userRepositoryService.updatePassword.mockResolvedValue(\r\n        UserFactory.create(),\r\n      );\r\n      userEventsService.publishUserPasswordChanged = jest\r\n        .fn()\r\n        .mockResolvedValue(undefined);\r\n      notificationService.createNotification.mockResolvedValue({\r\n        id: 'notification-id',\r\n        createdAt: new Date(),\r\n        updatedAt: new Date(),\r\n        userId: 'user1',\r\n        message: 'Password reset notification',\r\n        type: 'warning',\r\n        link: null,\r\n        read: false,\r\n      });\r\n\r\n      // Act\r\n      const result = await service.resetUserPassword(resetPasswordDto);\r\n\r\n      // Assert - Verify that email is sent when sendEmail defaults to true\r\n      expect(result.emailSent).toBe(true);\r\n      expect(notificationService.createNotification).toHaveBeenCalled();\r\n    });\r\n\r\n    it('should test explicit sendEmail = false behavior', async () => {\r\n      // Arrange\r\n      const resetPasswordDto: ResetPasswordDto = {\r\n        userId: 'user1',\r\n        sendEmail: false, // Explicitly set to false\r\n      };\r\n\r\n      userRepositoryService.findById.mockResolvedValue(UserFactory.create());\r\n      userAuthService.hashPassword = jest\r\n        .fn()\r\n        .mockResolvedValue('hashed-temp-password');\r\n      userRepositoryService.updatePassword.mockResolvedValue(\r\n        UserFactory.create(),\r\n      );\r\n      userEventsService.publishUserPasswordChanged = jest\r\n        .fn()\r\n        .mockResolvedValue(undefined);\r\n\r\n      // Act\r\n      const result = await service.resetUserPassword(resetPasswordDto);\r\n\r\n      // Assert - Verify that email is NOT sent when sendEmail is false\r\n      expect(result.emailSent).toBe(false);\r\n      expect(result.tempPassword).toBeDefined();\r\n      expect(notificationService.createNotification).not.toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('Surviving Mutant #9: Catch Block in ResetUserPassword (Line 388)', () => {\r\n    it('should execute catch block when email send fails', async () => {\r\n      // Arrange\r\n      const resetPasswordDto: ResetPasswordDto = {\r\n        userId: 'user1',\r\n        sendEmail: true,\r\n      };\r\n\r\n      userRepositoryService.findById.mockResolvedValue(UserFactory.create());\r\n      userAuthService.hashPassword = jest\r\n        .fn()\r\n        .mockResolvedValue('hashed-temp-password');\r\n      userRepositoryService.updatePassword.mockResolvedValue(\r\n        UserFactory.create(),\r\n      );\r\n      userEventsService.publishUserPasswordChanged = jest\r\n        .fn()\r\n        .mockResolvedValue(undefined);\r\n      // Force notification service to throw error to trigger catch block\r\n      notificationService.createNotification.mockRejectedValue(\r\n        new Error('Notification send failed'),\r\n      );\r\n\r\n      // Spy on console.error to verify catch block execution\r\n      const consoleSpy = jest.spyOn(console, 'error').mockImplementation();\r\n\r\n      // Act\r\n      const result = await service.resetUserPassword(resetPasswordDto);\r\n\r\n      // Assert\r\n      expect(result.emailSent).toBe(false);\r\n      expect(result.tempPassword).toBeDefined();\r\n      expect(consoleSpy).toHaveBeenCalledWith(\r\n        'Failed to send password reset email:',\r\n        expect.any(Error),\r\n      );\r\n\r\n      consoleSpy.mockRestore();\r\n    });\r\n  });\r\n});\r\n"},"src/users/services/__tests__/user-facade.service.mutation.spec.ts":{"tests":[{"id":"43","name":"UserFacadeService Mutation Tests create should create user successfully","location":{"start":{"column":6,"line":142}}},{"id":"44","name":"UserFacadeService Mutation Tests create should handle creation errors","location":{"start":{"column":6,"line":191}}},{"id":"45","name":"UserFacadeService Mutation Tests findOne should find user by id","location":{"start":{"column":6,"line":214}}},{"id":"46","name":"UserFacadeService Mutation Tests findOne should return null for non-existent user","location":{"start":{"column":6,"line":239}}},{"id":"47","name":"UserFacadeService Mutation Tests validateUser should validate user with correct credentials","location":{"start":{"column":6,"line":254}}},{"id":"48","name":"UserFacadeService Mutation Tests validateUser should return null for invalid credentials","location":{"start":{"column":6,"line":283}}},{"id":"49","name":"UserFacadeService Mutation Tests update should update user successfully","location":{"start":{"column":6,"line":302}}},{"id":"50","name":"UserFacadeService Mutation Tests remove should remove user successfully","location":{"start":{"column":6,"line":360}}},{"id":"51","name":"UserFacadeService Mutation Tests getUserStats should get user statistics","location":{"start":{"column":6,"line":395}}},{"id":"52","name":"UserFacadeService Mutation Tests findAll should find all users","location":{"start":{"column":6,"line":419}}}],"source":"//  Simple Mutation Test for UserFacadeService\r\n// packages/api/src/users/services/__tests__/user-facade.service.mutation.spec.ts\r\n\r\nimport { Test, TestingModule } from '@nestjs/testing';\r\nimport { UserFacadeService } from '../user-facade.service';\r\nimport { UserRepositoryService } from '../user-repository.service';\r\nimport { UserAuthenticationService } from '../user-authentication.service';\r\nimport { UserAnalyticsService } from '../user-analytics.service.simple';\r\nimport { UserEventsService } from '../user-events.service';\r\nimport { NotificationService } from '../../../notification/notification.service';\r\nimport { CreateUserDto } from '../../dto/create-user.dto';\r\nimport { UpdateUserDto } from '../../dto/update-user.dto';\r\nimport { LoginUserDto } from '../../dto/login-user.dto';\r\n\r\ndescribe('UserFacadeService Mutation Tests', () => {\r\n  let service: UserFacadeService;\r\n  let userRepository: jest.Mocked<UserRepositoryService>;\r\n  let userAuthentication: jest.Mocked<UserAuthenticationService>;\r\n  let userAnalytics: jest.Mocked<UserAnalyticsService>;\r\n  let userEvents: jest.Mocked<UserEventsService>;\r\n  let notificationService: jest.Mocked<NotificationService>;\r\n  let module: TestingModule;\r\n\r\n  beforeEach(async () => {\r\n    const mockUserRepository = {\r\n      create: jest.fn(),\r\n      findById: jest.fn(),\r\n      findByEmail: jest.fn(),\r\n      findAll: jest.fn(),\r\n      findAllWithFilters: jest.fn(),\r\n      update: jest.fn(),\r\n      updateTags: jest.fn(),\r\n      delete: jest.fn(),\r\n      updatePassword: jest.fn(),\r\n      markEmailAsVerified: jest.fn(),\r\n      updateLastLogin: jest.fn(),\r\n      exists: jest.fn(),\r\n      existsByEmail: jest.fn(),\r\n      count: jest.fn(),\r\n      countByFilters: jest.fn(),\r\n    };\r\n\r\n    const mockUserAuthentication = {\r\n      validateUser: jest.fn(),\r\n      validatePassword: jest.fn(),\r\n      changePassword: jest.fn(),\r\n      hashPassword: jest.fn(),\r\n      generatePasswordResetToken: jest.fn(),\r\n      validatePasswordResetToken: jest.fn(),\r\n      invalidateUserSessions: jest.fn(),\r\n    };\r\n\r\n    const mockUserAnalytics = {\r\n      getUserStats: jest.fn(),\r\n      getUserGrowthStats: jest.fn(),\r\n      getUserActivityStats: jest.fn(),\r\n      getUserDemographics: jest.fn(),\r\n      getUserRetentionStats: jest.fn(),\r\n      getUsersByRole: jest.fn(),\r\n      getUsersByStatus: jest.fn(),\r\n      getActiveUsersCount: jest.fn(),\r\n      getInactiveUsersCount: jest.fn(),\r\n      getLoginFrequencyStats: jest.fn(),\r\n      getUserEngagementScore: jest.fn(),\r\n      getTopActiveUsers: jest.fn(),\r\n    };\r\n\r\n    const mockUserEvents = {\r\n      publishUserCreated: jest.fn(),\r\n      publishUserUpdated: jest.fn(),\r\n      publishUserDeleted: jest.fn(),\r\n      publishUserPasswordChanged: jest.fn(),\r\n      publishUserEmailVerified: jest.fn(),\r\n      publishUserLoggedIn: jest.fn(),\r\n      publishUserRoleChanged: jest.fn(),\r\n      publishUserBulkOperation: jest.fn(),\r\n    };\r\n\r\n    const mockNotificationService = {\r\n      create: jest.fn(),\r\n      findAll: jest.fn(),\r\n      findOne: jest.fn(),\r\n      update: jest.fn(),\r\n      remove: jest.fn(),\r\n      markAsRead: jest.fn(),\r\n      markAllAsRead: jest.fn(),\r\n      sendNotification: jest.fn(),\r\n    };\r\n\r\n    module = await Test.createTestingModule({\r\n      providers: [\r\n        UserFacadeService,\r\n        {\r\n          provide: UserRepositoryService,\r\n          useValue: mockUserRepository,\r\n        },\r\n        {\r\n          provide: UserAuthenticationService,\r\n          useValue: mockUserAuthentication,\r\n        },\r\n        {\r\n          provide: UserAnalyticsService,\r\n          useValue: mockUserAnalytics,\r\n        },\r\n        {\r\n          provide: UserEventsService,\r\n          useValue: mockUserEvents,\r\n        },\r\n        {\r\n          provide: NotificationService,\r\n          useValue: mockNotificationService,\r\n        },\r\n      ],\r\n    }).compile();\r\n\r\n    service = module.get<UserFacadeService>(UserFacadeService);\r\n    userRepository = module.get<UserRepositoryService>(\r\n      UserRepositoryService,\r\n    ) as jest.Mocked<UserRepositoryService>;\r\n    userAuthentication = module.get<UserAuthenticationService>(\r\n      UserAuthenticationService,\r\n    ) as jest.Mocked<UserAuthenticationService>;\r\n    userAnalytics = module.get<UserAnalyticsService>(\r\n      UserAnalyticsService,\r\n    ) as jest.Mocked<UserAnalyticsService>;\r\n    userEvents = module.get<UserEventsService>(\r\n      UserEventsService,\r\n    ) as jest.Mocked<UserEventsService>;\r\n    notificationService = module.get<NotificationService>(\r\n      NotificationService,\r\n    ) as jest.Mocked<NotificationService>;\r\n\r\n    // Reset mocks\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  afterEach(async () => {\r\n    await module.close();\r\n  });\r\n\r\n  describe('create', () => {\r\n    it('should create user successfully', async () => {\r\n      // Arrange\r\n      const createUserDto: CreateUserDto = {\r\n        email: 'test@example.com',\r\n        password: 'password123',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        terms: true,\r\n      };\r\n\r\n      const hashedPassword = 'hashedPassword123';\r\n      const createdUser = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: null,\r\n      };\r\n\r\n      const fullUser = {\r\n        ...createdUser,\r\n        password: hashedPassword,\r\n        emailVerified: null,\r\n      };\r\n\r\n      userAuthentication.hashPassword.mockResolvedValue(hashedPassword);\r\n      userRepository.create.mockResolvedValue(createdUser);\r\n      userRepository.findByEmail.mockResolvedValue(fullUser);\r\n      userEvents.publishUserCreated.mockResolvedValue(undefined);\r\n\r\n      // Act\r\n      const result = await service.create(createUserDto);\r\n\r\n      // Assert\r\n      expect(result).toEqual(createdUser);\r\n      expect(userAuthentication.hashPassword).toHaveBeenCalledWith(\r\n        'password123',\r\n      );\r\n      expect(userRepository.create).toHaveBeenCalledWith({\r\n        ...createUserDto,\r\n        password: hashedPassword,\r\n      });\r\n      expect(userEvents.publishUserCreated).toHaveBeenCalledWith(fullUser);\r\n    });\r\n\r\n    it('should handle creation errors', async () => {\r\n      // Arrange\r\n      const createUserDto: CreateUserDto = {\r\n        email: 'test@example.com',\r\n        password: 'password123',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        terms: true,\r\n      };\r\n\r\n      userAuthentication.hashPassword.mockRejectedValue(\r\n        new Error('Hashing failed'),\r\n      );\r\n\r\n      // Act & Assert\r\n      await expect(service.create(createUserDto)).rejects.toThrow(\r\n        'Hashing failed',\r\n      );\r\n    });\r\n  });\r\n\r\n  describe('findOne', () => {\r\n    it('should find user by id', async () => {\r\n      // Arrange\r\n      const userId = '1';\r\n      const user = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date(),\r\n        emailVerified: new Date(),\r\n      };\r\n\r\n      userRepository.findById.mockResolvedValue(user);\r\n\r\n      // Act\r\n      const result = await service.findOne(userId);\r\n\r\n      // Assert\r\n      expect(result).toEqual(user);\r\n      expect(userRepository.findById).toHaveBeenCalledWith(userId);\r\n    });\r\n\r\n    it('should return null for non-existent user', async () => {\r\n      // Arrange\r\n      const userId = '999';\r\n      userRepository.findById.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const result = await service.findOne(userId);\r\n\r\n      // Assert\r\n      expect(result).toBeNull();\r\n      expect(userRepository.findById).toHaveBeenCalledWith(userId);\r\n    });\r\n  });\r\n\r\n  describe('validateUser', () => {\r\n    it('should validate user with correct credentials', async () => {\r\n      // Arrange\r\n      const loginDto: LoginUserDto = {\r\n        email: 'test@example.com',\r\n        password: 'password123',\r\n      };\r\n\r\n      const user = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date(),\r\n        emailVerified: new Date(),\r\n      };\r\n\r\n      userAuthentication.validateUser.mockResolvedValue(user);\r\n\r\n      // Act\r\n      const result = await service.validateUser(loginDto);\r\n\r\n      // Assert\r\n      expect(result).toEqual(user);\r\n      expect(userAuthentication.validateUser).toHaveBeenCalledWith(loginDto);\r\n    });\r\n\r\n    it('should return null for invalid credentials', async () => {\r\n      // Arrange\r\n      const loginDto: LoginUserDto = {\r\n        email: 'test@example.com',\r\n        password: 'wrongpassword',\r\n      };\r\n\r\n      userAuthentication.validateUser.mockResolvedValue(null);\r\n\r\n      // Act\r\n      const result = await service.validateUser(loginDto);\r\n\r\n      // Assert\r\n      expect(result).toBeNull();\r\n      expect(userAuthentication.validateUser).toHaveBeenCalledWith(loginDto);\r\n    });\r\n  });\r\n\r\n  describe('update', () => {\r\n    it('should update user successfully', async () => {\r\n      // Arrange\r\n      const userId = '1';\r\n      const updateDto: UpdateUserDto = {\r\n        name: 'Updated Name',\r\n        lastName: 'Updated LastName',\r\n      };\r\n\r\n      const previousUser = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date(),\r\n      };\r\n\r\n      const updatedUser = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Updated Name',\r\n        lastName: 'Updated LastName',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date(),\r\n      };\r\n\r\n      const fullUser = {\r\n        ...updatedUser,\r\n        password: 'hashedPassword',\r\n        emailVerified: new Date(),\r\n      };\r\n\r\n      userRepository.findById.mockResolvedValue(previousUser);\r\n      userRepository.update.mockResolvedValue(updatedUser);\r\n      userRepository.findByEmail.mockResolvedValue(fullUser);\r\n      userEvents.publishUserUpdated.mockResolvedValue(undefined);\r\n\r\n      // Act\r\n      const result = await service.update(userId, updateDto);\r\n\r\n      // Assert\r\n      expect(result).toEqual(updatedUser);\r\n      expect(userRepository.update).toHaveBeenCalledWith(userId, updateDto);\r\n      expect(userEvents.publishUserUpdated).toHaveBeenCalledWith(fullUser, {\r\n        id: previousUser.id,\r\n        email: previousUser.email,\r\n        name: previousUser.name,\r\n        lastName: previousUser.lastName,\r\n        contactNumber: previousUser.contactNumber,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('remove', () => {\r\n    it('should remove user successfully', async () => {\r\n      // Arrange\r\n      const userId = '1';\r\n      const user = {\r\n        id: '1',\r\n        email: 'test@example.com',\r\n        name: 'Test',\r\n        lastName: 'User',\r\n        contactNumber: '+1234567890',\r\n        role: 'user' as const,\r\n        createdAt: new Date(),\r\n        lastLogin: new Date(),\r\n      };\r\n\r\n      userRepository.findById.mockResolvedValue(user);\r\n      userRepository.delete.mockResolvedValue(undefined);\r\n      userEvents.publishUserDeleted.mockResolvedValue(undefined);\r\n\r\n      // Act\r\n      const result = await service.remove(userId);\r\n\r\n      // Assert\r\n      expect(result).toEqual({ message: 'User deleted successfully' });\r\n      expect(userRepository.delete).toHaveBeenCalledWith(userId);\r\n      expect(userEvents.publishUserDeleted).toHaveBeenCalledWith(userId, {\r\n        id: user.id,\r\n        email: user.email,\r\n        name: user.name,\r\n        lastName: user.lastName,\r\n        contactNumber: user.contactNumber,\r\n      });\r\n    });\r\n  });\r\n\r\n  describe('getUserStats', () => {\r\n    it('should get user statistics', async () => {\r\n      // Arrange\r\n      const stats = {\r\n        total: 100,\r\n        active: 80,\r\n        inactive: 20,\r\n        verified: 75,\r\n        unverified: 25,\r\n        recentSignups: 10,\r\n        deletedRecently: 2,\r\n      };\r\n\r\n      userAnalytics.getUserStats.mockResolvedValue(stats);\r\n\r\n      // Act\r\n      const result = await service.getUserStats();\r\n\r\n      // Assert\r\n      expect(result).toEqual(stats);\r\n      expect(userAnalytics.getUserStats).toHaveBeenCalled();\r\n    });\r\n  });\r\n\r\n  describe('findAll', () => {\r\n    it('should find all users', async () => {\r\n      // Arrange\r\n      const users = [\r\n        {\r\n          id: '1',\r\n          email: 'user1@example.com',\r\n          name: 'User',\r\n          lastName: 'One',\r\n          contactNumber: '+1111111111',\r\n          role: 'user' as const,\r\n          createdAt: new Date(),\r\n          lastLogin: new Date(),\r\n        },\r\n        {\r\n          id: '2',\r\n          email: 'user2@example.com',\r\n          name: 'User',\r\n          lastName: 'Two',\r\n          contactNumber: '+2222222222',\r\n          role: 'user' as const,\r\n          createdAt: new Date(),\r\n          lastLogin: new Date(),\r\n        },\r\n      ];\r\n\r\n      userRepository.findAll.mockResolvedValue(users);\r\n\r\n      // Act\r\n      const result = await service.findAll();\r\n\r\n      // Assert\r\n      expect(result).toEqual(users);\r\n      expect(userRepository.findAll).toHaveBeenCalled();\r\n    });\r\n  });\r\n});\r\n"}},"projectRoot":"/Users/luiseurdanetamartucci/Desktop/INSIDE/Alkitu-template/packages/api","config":{"packageManager":"npm","reporters":["clear-text","progress","json","html"],"testRunner":"jest","testRunnerNodeArgs":["--max_old_space_size=6144"],"coverageAnalysis":"off","mutate":["src/users/services/user-facade.service.ts"],"mutator":{"excludedMutations":["StringLiteral","ConditionalExpression"],"plugins":null},"thresholds":{"high":85,"low":70,"break":60},"timeoutMS":60000,"concurrency":2,"plugins":["@stryker-mutator/jest-runner"],"jest":{"projectType":"custom","config":{"preset":"ts-jest","testEnvironment":"node","testMatch":["**/user-facade.service.mutation.spec.ts","**/user-facade.service.comprehensive-fixed.spec.ts","**/user-facade.service.kill-mutants.spec.ts","**/user-facade.service.100-percent.spec.ts"],"modulePathIgnorePatterns":["user-analytics.service.ts","lsp-compliant-user-authentication.service.ts","dip-compliant-user-management.service.ts","lsp-compliant-welcome-email.channel.ts"],"globals":{"ts-jest":{"tsconfig":{"skipLibCheck":true,"strict":false}}}},"enableFindRelatedTests":true},"htmlReporter":{"fileName":"reports/mutation/index.html"},"jsonReporter":{"fileName":"reports/mutation/mutation-report.json"},"dashboard":{"project":"alkitu-template-api","version":"main","baseUrl":"https://dashboard.stryker-mutator.io/api/reports","reportType":"full"},"ignorePatterns":["**/node_modules/**/*","**/*.d.ts","**/dist/**/*","**/build/**/*","**/user-analytics.service.ts","**/lsp-compliant-user-authentication.service.ts","**/dip-compliant-user-management.service.ts","**/lsp-compliant-welcome-email.channel.ts"],"allowConsoleColors":true,"checkers":[],"checkerNodeArgs":[],"commandRunner":{"command":"npm test"},"clearTextReporter":{"allowColor":true,"allowEmojis":false,"logTests":true,"maxTestsToLog":3,"reportTests":true,"reportMutants":true,"reportScoreTable":true,"skipFull":false},"dryRunOnly":false,"eventReporter":{"baseDir":"reports/mutation/events"},"ignoreStatic":false,"incremental":false,"incrementalFile":"reports/stryker-incremental.json","force":false,"fileLogLevel":"off","inPlace":false,"logLevel":"info","maxConcurrentTestRunners":9007199254740991,"maxTestRunnerReuse":0,"appendPlugins":[],"disableTypeChecks":true,"symlinkNodeModules":true,"tempDirName":".stryker-tmp","cleanTempDir":true,"timeoutFactor":1.5,"dryRunTimeoutMinutes":5,"tsconfigFile":"tsconfig.json","warnings":true,"disableBail":false,"allowEmpty":false,"ignorers":[]},"framework":{"name":"StrykerJS","version":"9.0.1","branding":{"homepageUrl":"https://stryker-mutator.io","imageUrl":"data:image/svg+xml;utf8,%3Csvg viewBox='0 0 1458 1458' xmlns='http://www.w3.org/2000/svg' fill-rule='evenodd' clip-rule='evenodd' stroke-linejoin='round' stroke-miterlimit='2'%3E%3Cpath fill='none' d='M0 0h1458v1458H0z'/%3E%3CclipPath id='a'%3E%3Cpath d='M0 0h1458v1458H0z'/%3E%3C/clipPath%3E%3Cg clip-path='url(%23a)'%3E%3Cpath d='M1458 729c0 402.655-326.345 729-729 729S0 1131.655 0 729C0 326.445 326.345 0 729 0s729 326.345 729 729' fill='%23e74c3c' fill-rule='nonzero'/%3E%3Cpath d='M778.349 1456.15L576.6 1254.401l233-105 85-78.668v-64.332l-257-257-44-187-50-208 251.806-82.793L1076.6 389.401l380.14 379.15c-19.681 367.728-311.914 663.049-678.391 687.599z' fill-opacity='.3'/%3E%3Cpath d='M753.4 329.503c41.79 0 74.579 7.83 97.925 25.444 23.571 18.015 41.69 43.956 55.167 77.097l11.662 28.679 165.733-58.183-14.137-32.13c-26.688-60.655-64.896-108.61-114.191-144.011-49.329-35.423-117.458-54.302-204.859-54.302-50.78 0-95.646 7.376-134.767 21.542-40.093 14.671-74.09 34.79-102.239 60.259-28.84 26.207-50.646 57.06-65.496 92.701-14.718 35.052-22.101 72.538-22.101 112.401 0 72.536 20.667 133.294 61.165 182.704 38.624 47.255 98.346 88.037 179.861 121.291 42.257 17.475 78.715 33.125 109.227 46.994 27.193 12.361 49.294 26.124 66.157 41.751 15.309 14.186 26.497 30.584 33.63 49.258 7.721 20.214 11.16 45.69 11.16 76.402 0 28.021-4.251 51.787-13.591 71.219-8.832 18.374-20.171 33.178-34.523 44.219-14.787 11.374-31.193 19.591-49.393 24.466-19.68 5.359-39.14 7.993-58.69 7.993-29.359 0-54.387-3.407-75.182-10.747-20.112-7.013-37.144-16.144-51.259-27.486-13.618-11.009-24.971-23.766-33.744-38.279-9.64-15.8-17.272-31.924-23.032-48.408l-10.965-31.376-161.669 60.585 10.734 30.124c10.191 28.601 24.197 56.228 42.059 82.748 18.208 27.144 41.322 51.369 69.525 72.745 27.695 21.075 60.904 38.218 99.481 51.041 37.777 12.664 82.004 19.159 132.552 19.159 49.998 0 95.818-8.321 137.611-24.622 42.228-16.471 78.436-38.992 108.835-67.291 30.719-28.597 54.631-62.103 71.834-100.642 17.263-38.56 25.923-79.392 25.923-122.248 0-54.339-8.368-100.37-24.208-138.32-16.29-38.759-38.252-71.661-65.948-98.797-26.965-26.418-58.269-48.835-93.858-67.175-33.655-17.241-69.196-33.11-106.593-47.533-35.934-13.429-65.822-26.601-89.948-39.525-22.153-11.868-40.009-24.21-53.547-37.309-11.429-11.13-19.83-23.678-24.718-37.664-5.413-15.49-7.98-33.423-7.98-53.577 0-40.883 11.293-71.522 37.086-90.539 28.443-20.825 64.985-30.658 109.311-30.658z' fill='%23f1c40f' fill-rule='nonzero'/%3E%3Cpath d='M720 0h18v113h-18zM1458 738v-18h-113v18h113zM720 1345h18v113h-18zM113 738v-18H0v18h113z'/%3E%3C/g%3E%3C/svg%3E"},"dependencies":{"@stryker-mutator/jest-runner":"9.0.1","@stryker-mutator/typescript-checker":"9.0.1","jest":"29.7.0","typescript":"5.8.3","webpack":"5.99.6","ts-jest":"29.4.0"}}}